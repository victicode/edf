import{Q as u}from"./QInput-CCszA-Cu.js";import{r as m,G as q,e as d,g as a,w as i,O as J,N as O,q as L,o as n,f as t,T as k,i as c,v as f,l as j,B as y,x as p,H as I,n as P,t as G}from"./index-BSBF4jGH.js";import{Q as H}from"./QDate-BLdu9_3G.js";import{Q as b}from"./QPopupProxy-C_r6gXi9.js";import{Q as S}from"./QTime-6RwcKHVB.js";import{Q as A}from"./QSelect-CSskTD8W.js";import{Q as $}from"./QForm-n8jT9PtN.js";import{Q as W}from"./QSpinnerDots-C4tArpGa.js";import{C as x}from"./ClosePopup-CTuEMMh8.js";import{u as K}from"./comunArea.store-BuWp1D4-.js";import{u as X}from"./event.store-BYdYbnbP.js";import{h as D}from"./moment-BLMuvzoS.js";import"./use-key-composition-Z-2-MGMt.js";import"./use-id-BKlrVpl6.js";import"./use-render-cache-DLxPkVnQ.js";import"./format-CoaQEihs.js";import"./QMenu-DSB_uF9S.js";import"./position-engine-DU4jhfDu.js";import"./TouchPan-DZJlNQpP.js";import"./QChip-C5Fpsmun.js";import"./QItem-D2c8Co2M.js";import"./QItemLabel-CTtt8RWV.js";const Z={class:"md:px-20 md:mx-16 h-full",style:{overflow:"hidden",position:"relative"}},ee={key:0,class:"h-full"},te={style:{height:"90%","overflow-x":"hidden"}},oe={key:0,class:"h-full"},le={class:"w-full h-full"},se={class:"pb-10"},ae={class:"row w-full pt-5"},ie={class:"col-12 row"},re={class:"col-12 row md:px-5"},ne={class:"col-12 row mt-3 px-3 md:px-2"},de={class:"col-12"},ue={class:"col-12 mb-2"},me={class:"col-12 row md:px-5"},ce={class:"col-12 row mt-3 px-3 md:px-2"},pe={class:"col-12"},ve={class:"row items-center justify-end"},_e={class:"col-12 row md:px-5"},fe={class:"col-12 row mt-3 px-3 md:px-2"},ye={class:"col-6 pr-2 md:pr-4"},be={class:"row items-center justify-end"},xe={class:"col-6 pl-2 md:pl-4"},he={class:"row items-center justify-end"},we={key:0,class:"h-full"},Ve={class:"w-full h-full"},ge={class:"pb-10"},ke={class:"row w-full pt-5"},Se={class:"col-12 row"},Ae={class:"col-12 row md:px-5"},De={class:"col-12 row mt-3 px-3 md:px-2"},Qe={class:"col-12"},Me={key:0,class:"col-12 row mt-3 px-3 md:px-2"},Ue={class:"col-12"},Ee={key:1,class:"col-12 row mt-3 px-3 md:px-2"},Ye={class:"col-12"},Ne={style:{height:"10%"},class:"buttonSection"},Re={class:"row py-4"},Ce={class:"col-6 flex flex-center"},Fe={class:"py-1 md:py-1"},Be={key:1,class:"flex flex-center py-24 w-full"},rt={__name:"updateEvent",setup(Te){const Q={days:"Domingo_Lunes_Martes_Miércoles_Jueves_Viernes_Sábado".split("_"),daysShort:"Dom_Lun_Mar_Mié_Jue_Vie_Sáb".split("_"),months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),firstDayOfWeek:1,format24h:!0,pluralDay:"dias"},M=K(),h=X(),w=m([]),U=L(),E=J(),V=m(!1),v=m(!1),r=m(1),Y=[{value:-1,name:"Seleccione una opción"},{value:1,name:"Si"},{value:2,name:"No"}],o=m({}),g=m([0]),N=()=>{r.value==2,r.value--},R=()=>{if(r.value==2){B();return}r.value++},C=()=>{M.getAllComunAreas().then(s=>{if(s.code!==200)throw s;w.value=s.data}).catch(s=>{_("positive","Error al obtener areas comunes")})},F=s=>s>=D().format("YYYY/MM/DD"),_=(s,e)=>{O.create({color:s,message:e,timeout:2e3})},B=()=>{v.value=!0,T(o.value.typeArea);const s=new FormData;s.append("title",o.value.title),s.append("description",o.value.description),s.append("date",o.value.date),s.append("time_from",o.value.time_from),s.append("time_to",o.value.time_to),s.append("type_location",o.value.typeArea),o.value.typeArea==1&&s.append("area",o.value.area.id),s.append("location",o.value.location),h.updateEvent(s,o.value.id).then(e=>{console.log(e),_("positive","Evento editado con exito"),setTimeout(()=>{v.value=!1,U.go(-1)},500)}).catch(e=>{console.log(e),setTimeout(()=>{v.value=!1,_("negative","Error al editar evento")},1e3)})},T=s=>{s==1&&(o.value.location="."),s==2&&(o.value.area="")},z=()=>{h.getEventById(E.params.id).then(s=>{var e;o.value=s.data,o.value.typeArea=o.value.booking_id?1:2,o.value.area=(e=o.value.booking)==null?void 0:e.comun_area,setTimeout(()=>{V.value=!0},1e3)}).catch(s=>{console.log(s)})};return q(()=>{C(),z()}),(s,e)=>(n(),d("div",Z,[V.value?(n(),d("div",ee,[a($,{onSubmit:e[12]||(e[12]=l=>R()),class:"h-full"},{default:i(()=>[t("div",te,[a(k,{name:"horizontal"},{default:i(()=>[r.value==1?(n(),d("div",oe,[t("div",le,[t("div",se,[t("div",ae,[t("div",ie,[t("div",re,[e[15]||(e[15]=t("div",{class:"col-12 text-subtitle1 headerSection my-1 py-2 px-4"}," Datos del evento ",-1)),t("div",ne,[t("div",de,[e[13]||(e[13]=t("div",{class:"text-subtitle2 text-black"}," Titulo del evento ",-1)),a(u,{dense:"",borderless:"",clearable:"",modelValue:o.value.title,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.title=l),class:"form__inputsReverse mt-1",color:"primary",rules:[l=>l&&l.length>0||"Nombre de area es requerido"]},null,8,["modelValue","rules"])]),t("div",ue,[e[14]||(e[14]=t("div",{class:"text-subtitle2 text-black",style:{"font-weight":"medium"}}," Descripción ",-1)),a(u,{dense:"",borderless:"",clearable:"",type:"textarea",modelValue:o.value.description,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.description=l),class:"form__inputsReverse mt-1",color:"primary"},null,8,["modelValue"])])])]),t("div",me,[e[17]||(e[17]=t("div",{class:"col-12 text-subtitle1 headerSection my-1 py-2 px-4"}," Selecciona la fecha ",-1)),t("div",ce,[t("div",pe,[e[16]||(e[16]=t("div",{class:"text-subtitle2 text-black",style:{"font-weight":"medium"}}," Fecha del evento: ",-1)),a(u,{modelValue:o.value.date,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.date=l),rules:[l=>!!l||"Fecha es requerida"],dense:"",borderless:"",clearable:"",class:"form__inputsReverse mt-1",color:"primary"},{append:i(()=>[a(f,{name:"eva-calendar-outline",class:"cursor-pointer"},{default:i(()=>[a(b,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[a(H,{mask:"DD-MM-YYYY",modelValue:o.value.date,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.date=l),options:F,"navigation-min-year-month":j(D)().format("YYYY/MM"),locale:Q},{default:i(()=>[t("div",ve,[y(a(p,{label:"Aceptar",color:"primary",flat:""},null,512),[[x]])])]),_:1},8,["modelValue","navigation-min-year-month"])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])])])]),t("div",_e,[e[20]||(e[20]=t("div",{class:"col-12 text-subtitle1 headerSection my-1 py-2 px-4"}," Selecciona la hora ",-1)),t("div",fe,[t("div",ye,[e[18]||(e[18]=t("div",{class:"text-subtitle2 text-black",style:{"font-weight":"medium"}}," Desde: ",-1)),a(u,{modelValue:o.value.time_from,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.time_from=l),mask:"time",dense:"",borderless:"",clearable:"",class:"form__inputsReverse mt-1 q-pb-sm",color:"primary"},{append:i(()=>[a(f,{name:"eva-clock-outline",class:"cursor-pointer"},{default:i(()=>[a(b,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[a(S,{modelValue:o.value.time_from,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.time_from=l),"minute-options":g.value,format24h:""},{default:i(()=>[t("div",be,[y(a(p,{label:"Aceptar",color:"primary",flat:""},null,512),[[x]])])]),_:1},8,["modelValue","minute-options"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",xe,[e[19]||(e[19]=t("div",{class:"text-subtitle2 text-black",style:{"font-weight":"medium"}}," Hasta: ",-1)),a(u,{modelValue:o.value.time_to,"onUpdate:modelValue":e[7]||(e[7]=l=>o.value.time_to=l),mask:"time",dense:"",borderless:"",clearable:"",class:"form__inputsReverse mt-1 q-pb-sm",color:"primary"},{append:i(()=>[a(f,{name:"eva-clock-outline",class:"cursor-pointer"},{default:i(()=>[a(b,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[a(S,{modelValue:o.value.time_to,"onUpdate:modelValue":e[6]||(e[6]=l=>o.value.time_to=l),format24h:"","minute-options":g.value},{default:i(()=>[t("div",he,[y(a(p,{label:"Aceptar",color:"primary",flat:""},null,512),[[x]])])]),_:1},8,["modelValue","minute-options"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])])])])])])])):c("",!0)]),_:1}),a(k,{name:"horizontal"},{default:i(()=>[r.value==2?(n(),d("div",we,[t("div",Ve,[t("div",ge,[t("div",ke,[t("div",Se,[t("div",Ae,[e[25]||(e[25]=t("div",{class:"col-12 text-subtitle1 headerSection my-1 py-2 px-4"}," Datos de localidad ",-1)),t("div",De,[t("div",Qe,[e[21]||(e[21]=t("div",{class:"text-subtitle2 text-black"}," Usar area común ",-1)),a(A,{class:"form__inputsReverse mt-1",modelValue:o.value.typeArea,"onUpdate:modelValue":e[8]||(e[8]=l=>o.value.typeArea=l),options:Y,"option-label":"name","option-value":"value","emit-value":"","map-options":"",rules:[l=>l!=-1||"Debes seleccionar un recinto"],dense:"",borderless:""},null,8,["modelValue","rules"])])]),o.value.typeArea==1?(n(),d("div",Me,[t("div",Ue,[e[22]||(e[22]=t("div",{class:"text-subtitle2 text-black"}," Selecciona el recinto/ubicación ",-1)),a(A,{class:"form__inputsReverse mt-1",modelValue:o.value.area,"onUpdate:modelValue":e[9]||(e[9]=l=>o.value.area=l),options:w.value,"option-label":"name","option-value":"value","emit-value":"","map-options":"",rules:[l=>l.value!=-1||"Debes seleccionar un recinto"],dense:"",borderless:""},null,8,["modelValue","options","rules"]),e[23]||(e[23]=t("div",{class:"text-grey-7",style:{"font-size":"0.7rem"}}," Al escoger un area común como recinto para el evento, se realizara una reservación exclusiva del area seleccionada, con la fecha y horas asignados en este formulario ",-1))])])):c("",!0),o.value.typeArea==2?(n(),d("div",Ee,[t("div",Ye,[e[24]||(e[24]=t("div",{class:"text-subtitle2 text-black"}," Ubicación/Lugar ",-1)),a(u,{dense:"",borderless:"",clearable:"",modelValue:o.value.location,"onUpdate:modelValue":e[10]||(e[10]=l=>o.value.location=l),class:"form__inputsReverse mt-1",color:"primary",rules:[l=>l&&l.length>0||"Nombre de area es requerido"]},null,8,["modelValue","rules"])])])):c("",!0)])])])])])])):c("",!0)]),_:1})]),t("div",Ne,[t("div",Re,[t("div",Ce,[r.value>1?(n(),I(p,{key:0,color:"grey-8",class:"",style:{width:"90%","border-radius":"0.5rem"},onClick:e[11]||(e[11]=l=>N())},{default:i(()=>[...e[26]||(e[26]=[t("div",{class:"py-1 md:py-1"}," Volver ",-1)])]),_:1})):c("",!0)]),t("div",{class:P(["flex flex-center",r.value==1?"col-12":"col-6"])},[a(p,{color:"primary",class:"",style:{width:"90%","border-radius":"0.5rem"},type:"submit",loading:v.value},{default:i(()=>[t("div",Fe,G(r.value==3?"Guardar reserva":"Siguiente"),1)]),_:1},8,["loading"])],2)])])]),_:1})])):(n(),d("div",Be,[a(W,{color:"primary",size:"7rem"})]))]))}};export{rt as default};
