import{r as m,E,H as V,o as f,w as g,g as n,y as L,f as l,A as T,t as z,x as w,Q as P,N as F,z as B,v as j,G as Y,e as U,i as M,n as q,F as H}from"./index-BSBF4jGH.js";import{Q as J}from"./QSpinnerDots-C4tArpGa.js";import{_ as W,a as K,Q as X,b as Z,c as D}from"./filterAnnouncesList-Df_4kDfD.js";import{u as R}from"./notice.store-DyU3Koa3.js";import{Q as O}from"./QInput-CCszA-Cu.js";import{Q}from"./QSelect-CSskTD8W.js";import{Q as G}from"./QFile-CkLCNj0W.js";import{Q as I}from"./QForm-n8jT9PtN.js";import"./use-id-BKlrVpl6.js";import"./QItem-D2c8Co2M.js";import"./QSeparator-BBtHUKtx.js";import"./QList-DPQjt_4m.js";import"./QMenu-DSB_uF9S.js";import"./position-engine-DU4jhfDu.js";import"./ClosePopup-CTuEMMh8.js";import"./moment-BLMuvzoS.js";import"./index-DJ-hPCxW.js";import"./use-key-composition-Z-2-MGMt.js";import"./QChip-C5Fpsmun.js";import"./QItemLabel-CTtt8RWV.js";import"./format-CoaQEihs.js";const h={class:"px-5 py-4"},ee={class:"my-5 text-center text-lg",style:{"line-height":"1.7"}},oe={class:"mt-4 flex justify-between px-2"},le={__name:"deleteAnnounceModal",props:{dialog:Boolean,announce:Object},emits:["closeModal","updateList"],setup(S,{emit:k}){const x=k,r=S,_=R(),p=m(!1),v=m(r.dialog),y=()=>{x("closeModal")},d=()=>{y(),x("updateList")},b=()=>{p.value=!0,_.deleteNotices(r.announce.id).then(a=>{s("grey-5","El anuncio fue eliminado"),d()}).catch(a=>{console.log(a),s("negative","Error al borrar anuncio")}).finally(()=>{p.value=!1})},s=(a,c)=>{F.create({color:a,message:c,timeout:2e3})};return E(()=>r.dialog,a=>{v.value=a}),(a,c)=>(f(),V(P,{modelValue:v.value,"onUpdate:modelValue":c[0]||(c[0]=C=>v.value=C),class:"deleteAnnounceDialog",persistent:"","backdrop-filter":"blur(0.5px)"},{default:g(()=>[n(L,{class:"dialog_document w-full",style:{"border-radius":"1rem"}},{default:g(()=>[l("div",h,[l("div",ee,[c[1]||(c[1]=T(" ¿Seguro que deseas borrar el anuncio: ",-1)),c[2]||(c[2]=l("br",null,null,-1)),l("b",null,z(S.announce.title),1),c[3]||(c[3]=T(" ? ",-1))]),l("section",oe,[n(w,{color:"primary",label:"Cerrar",onClick:y}),n(w,{color:"primary",outline:"",label:"Borrar",onClick:b,loading:p.value},null,8,["loading"])])])]),_:1})]),_:1},8,["modelValue"]))}},te={class:"content__modalSectionRifa md:mt-5 py-0"},ae={class:"row w-full px-4"},ne={class:"col-md-6 col-12 mt-1 px-2 md:px-12"},se={class:"col-md-6 col-12 mt-1 px-2 md:px-12"},ie={class:"col-md-6 col-12 mt-1 px-2 md:px-12"},ue={class:"col-md-6 col-12 mt-1 px-2 md:px-12"},re={class:"col-md-6 col-12 mt-2 px-2 md:px-12"},de={class:"row items-center q-gutter-x-sm"},ce={class:"py-5"},pe={class:"flex justify-evenly mt-5"},me={__name:"updateAnnounceModal",props:{dialog:Boolean,announce:Object},emits:["closeModal","updateList"],setup(S,{emit:k}){const x=k,r=S,_=R(),p=_.group.slice(1),v=[{name:"Selecciona una opción",value:-1},...p],y=m([{name:"Selecciona una opción",value:-1},..._.category[r.announce.group]]),d=m(!1),b=m(r.dialog),s=()=>({title:r.announce.title,description:r.announce.description,group:v.find(t=>t.value==r.announce.group),category:y.value.find(t=>t.value==r.announce.category),imagen:r.announce.img?JSON.parse(r.announce.img):[]}),a=m(s()),c=()=>{x("closeModal")},C=()=>{c(),x("updateList")},$=()=>{d.value=!0;const t=2,e=new FormData;e.append("title",a.value.title),e.append("description",a.value.description),e.append("group",a.value.group.value),e.append("category",a.value.category.value),e.append("type",t),a.value.imagen.forEach(o=>{e.append("img[]",o)}),_.updateNotice(e,r.announce.id).then(o=>{u("positive","Tu anuncio fue enviado para revisión"),C()}).catch(o=>{console.log(o),u("negative","Error al publicar anuncio")}).finally(()=>{d.value=!1})},N=t=>{if(t==-1){y.value=[{name:"Selecciona una opción",value:-1}],a.value.category={name:"Selecciona una opción",value:-1};return}y.value=[{name:"Selecciona una opción",value:-1},..._.category[t]]},u=(t,e)=>{F.create({color:t,message:e,timeout:2e3})},i=t=>{const e=t[0].failedPropValidation=="max-files"?"Solo se pueden publicar maximo 2 fotos por post":"Error al subir imagen, verifica que sea una imagen valida";u("negative",e)};return E(()=>r.dialog,t=>{b.value=t,a.value=s()}),(t,e)=>(f(),V(P,{modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=o=>b.value=o),class:"updateAnnounceDialog",persistent:"","backdrop-filter":"blur(0.5px)"},{default:g(()=>[n(L,{class:"dialog_document w-full",style:{"border-radius":"1rem"}},{default:g(()=>[n(I,{onSubmit:e[6]||(e[6]=o=>$())},{default:g(()=>[n(B,{class:"q-px-none"},{default:g(()=>[...e[8]||(e[8]=[l("div",{class:"text-h6 text-black pb-2 px-5",style:{"border-bottom":"1px solid lightgray"}}," Editar anuncio ",-1)])]),_:1}),l("section",te,[l("div",ae,[l("div",ne,[e[9]||(e[9]=l("div",{class:"text-subtitle2 text-black"}," Titulo * ",-1)),n(O,{dense:"",borderless:"",clearable:"",modelValue:a.value.title,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.title=o),class:"form__inputsR mt-1",color:"primary",rules:[o=>o&&o.length>0||"Titulo del anuncio es obligatorio"]},null,8,["modelValue","rules"])]),l("div",se,[e[10]||(e[10]=l("div",{class:"text-subtitle2 text-black"}," Grupo * ",-1)),n(Q,{class:"form__inputsR mt-1",modelValue:a.value.group,"onUpdate:modelValue":[e[1]||(e[1]=o=>a.value.group=o),N],options:v,"option-label":"name","option-value":"value","emit-value":"","map-options":"",rules:[o=>o.value!=-1||"Grupo es obligatorio"],dense:"",borderless:""},null,8,["modelValue","rules"])]),l("div",ie,[e[11]||(e[11]=l("div",{class:"text-subtitle2 text-black"}," Categoria * ",-1)),n(Q,{class:"form__inputsR mt-1",modelValue:a.value.category,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.category=o),options:y.value,"option-label":"name","option-value":"value","emit-value":"","map-options":"",rules:[o=>o.value!=-1||"Categoria es obligatoria"],dense:"",borderless:""},null,8,["modelValue","options","rules"])]),l("div",ue,[e[12]||(e[12]=l("div",{class:"text-subtitle2 text-black"}," Descripción * ",-1)),n(O,{dense:"",borderless:"",type:"textarea",modelValue:a.value.description,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.description=o),class:"form__inputsR mt-1",color:"primary",rules:[o=>(A=>A&&A.length>0),o=>o&&o.length>30||"Debe contener minimo 30 caracteres"]},null,8,["modelValue","rules"])]),l("div",re,[e[14]||(e[14]=l("div",{class:"text-subtitle2 text-black"}," Adjuntar imagen ",-1)),n(G,{modelValue:a.value.imagen,"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.imagen=o),dense:"",borderless:"",clearable:"",class:"form__inputsR mt-1",color:"primary",multiple:"","max-files":2,accept:".jpg,.png,.webp,.jpeg image/*",onRejected:i},{append:g(()=>[n(j,{name:"eva-folder-add-outline",class:"cursor-pointer"})]),selected:g(()=>[l("div",de,[n(j,{name:"eva-checkmark-circle-2-outline",color:"positive",size:"sm"}),e[13]||(e[13]=l("div",null,"Archivo subido",-1))])]),_:1},8,["modelValue"])])])]),l("section",ce,[e[15]||(e[15]=l("div",{class:"w-full px-4 text-caption"}," Recuerda: Para publicar, debe estar solvente con tus pagos y esperar la validación del administrador. ",-1)),l("div",pe,[n(w,{label:"Cerrar",unelevated:"",class:"q-mx-sm",color:"primary",outline:"",style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"},onClick:e[5]||(e[5]=o=>c())}),n(w,{label:"Publicar",type:"submit",unelevated:"",class:"q-mx-sm",color:"primary",loading:d.value,style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"}},null,8,["loading"])])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},ve={class:"content__modalSectionRifa md:mt-5 py-0"},ge={class:"row w-full px-4"},ye={class:"col-md-6 col-12 mt-1 px-2 md:px-12"},be={class:"col-md-6 col-12 mt-1 px-2 md:px-12"},fe={class:"col-md-6 col-12 mt-1 px-2 md:px-12"},xe={class:"col-md-6 col-12 mt-1 px-2 md:px-12"},_e={class:"col-md-6 col-12 mt-2 px-2 md:px-12"},Ve={class:"row items-center q-gutter-x-sm"},ke={class:"py-5"},$e={class:"flex justify-evenly mt-5"},Se={__name:"createAnnouncesModal",props:{dialog:Boolean},emits:["closeModal","updateList"],setup(S,{emit:k}){const x=k,r=S,_=R(),p=_.group.slice(1),v=[{name:"Selecciona una opción",value:-1},...p],y=m([{name:"Selecciona una opción",value:-1}]),d=m(!1),b=m(r.dialog),s=m({title:"",description:"",group:{name:"Selecciona una opción",value:-1},category:{name:"Selecciona una opción",value:-1},imagen:[]}),a=()=>{x("closeModal"),C()},c=()=>{a(),x("updateList")},C=()=>{s.value={title:"",description:"",group:{name:"Selecciona una opción",value:-1},category:{name:"Selecciona una opción",value:-1},imagen:[]}},$=()=>{d.value=!0;const t=2,e=new FormData;e.append("title",s.value.title),e.append("description",s.value.description),e.append("group",s.value.group),e.append("category",s.value.category),e.append("type",t),s.value.imagen.forEach(o=>{e.append("img[]",o)}),_.createNotice(e).then(o=>{u("positive","Tu anuncio fue enviado para revisión"),c()}).catch(o=>{console.log(o),u("negative","Error al publicar anuncio")}).finally(()=>{d.value=!1})},N=t=>{if(t==-1){y.value=[{name:"Selecciona una opción",value:-1}],s.value.category={name:"Selecciona una opción",value:-1};return}y.value=[{name:"Selecciona una opción",value:-1},..._.category[t]]},u=(t,e)=>{F.create({color:t,message:e,timeout:2e3})},i=t=>{const e=t[0].failedPropValidation=="max-files"?"Solo se pueden publicar maximo 2 fotos por post":"Error al subir imagen, verifica que sea una imagen valida";u("negative",e)};return E(()=>r.dialog,t=>{b.value=t}),(t,e)=>(f(),V(P,{modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=o=>b.value=o),class:"createAnnounceDialog",persistent:"","backdrop-filter":"blur(0.5px)"},{default:g(()=>[n(L,{class:"dialog_document w-full",style:{"border-radius":"1rem"}},{default:g(()=>[n(I,{onSubmit:e[6]||(e[6]=o=>$())},{default:g(()=>[n(B,{class:"q-px-none"},{default:g(()=>[...e[8]||(e[8]=[l("div",{class:"text-h6 text-black pb-2 px-5",style:{"border-bottom":"1px solid lightgray"}}," Publicar anuncio ",-1)])]),_:1}),l("section",ve,[l("div",ge,[l("div",ye,[e[9]||(e[9]=l("div",{class:"text-subtitle2 text-black"}," Titulo * ",-1)),n(O,{dense:"",borderless:"",clearable:"",modelValue:s.value.title,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.title=o),class:"form__inputsR mt-1",color:"primary",rules:[o=>o&&o.length>0||"Titulo del anuncio es obligatorio"]},null,8,["modelValue","rules"])]),l("div",be,[e[10]||(e[10]=l("div",{class:"text-subtitle2 text-black"}," Grupo * ",-1)),n(Q,{class:"form__inputsR mt-1",modelValue:s.value.group,"onUpdate:modelValue":[e[1]||(e[1]=o=>s.value.group=o),N],options:v,"option-label":"name","option-value":"value","emit-value":"","map-options":"",rules:[o=>o.value!=-1||"Grupo es obligatorio"],dense:"",borderless:""},null,8,["modelValue","rules"])]),l("div",fe,[e[11]||(e[11]=l("div",{class:"text-subtitle2 text-black"}," Categoria * ",-1)),n(Q,{class:"form__inputsR mt-1",modelValue:s.value.category,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.category=o),options:y.value,"option-label":"name","option-value":"value","emit-value":"","map-options":"",rules:[o=>o.value!=-1||"Categoria es obligatoria"],dense:"",borderless:""},null,8,["modelValue","options","rules"])]),l("div",xe,[e[12]||(e[12]=l("div",{class:"text-subtitle2 text-black"}," Descripción * ",-1)),n(O,{dense:"",borderless:"",type:"textarea",modelValue:s.value.description,"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.description=o),class:"form__inputsR mt-1",color:"primary",rules:[o=>(A=>A&&A.length>0),o=>o&&o.length>30||"Debe contener minimo 30 caracteres"]},null,8,["modelValue","rules"])]),l("div",_e,[e[14]||(e[14]=l("div",{class:"text-subtitle2 text-black"}," Adjuntar imagen ",-1)),n(G,{modelValue:s.value.imagen,"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.imagen=o),dense:"",borderless:"",clearable:"",class:"form__inputsR mt-1",color:"primary",multiple:"","max-files":2,accept:".jpg,.png,.webp,.jpeg image/*",onRejected:i},{append:g(()=>[n(j,{name:"eva-folder-add-outline",class:"cursor-pointer"})]),selected:g(()=>[l("div",Ve,[n(j,{name:"eva-checkmark-circle-2-outline",color:"positive",size:"sm"}),e[13]||(e[13]=l("div",null,"Archivo subido",-1))])]),_:1},8,["modelValue"])])])]),l("section",ke,[e[15]||(e[15]=l("div",{class:"w-full px-4 text-caption"}," Recuerda: Para publicar, debe estar solvente con tus pagos y esperar la validación del administrador. ",-1)),l("div",$e,[n(w,{label:"Cerrar",unelevated:"",class:"q-mx-sm",color:"primary",outline:"",style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"},onClick:e[5]||(e[5]=o=>a())}),n(w,{label:"Publicar",type:"submit",unelevated:"",class:"q-mx-sm",color:"primary",loading:d.value,style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"}},null,8,["loading"])])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Ce={class:"h-full",style:{overflow:"hidden"}},we={class:"h-full",style:{overflow:"auto",position:"relative"}},Me={class:"flex justify-center mt-3 bg-stone-200 py-2 buttonsContainer"},Ne={class:"flex justify-end md:pr-5 px-4 mt-2"},Ae={key:0,class:"flex justify-center items-center py-20"},Ue={key:1,class:"px-4 py-6 md:px-28"},je={key:2,class:"createAnnouncesFloat"},he={__name:"noticesList",setup(S){const k=m([]),x=m([]),r=m(!0),_=R(),p=m("notices"),v=m(""),y=m(!1),d=m({status:2,group:"",category:"",post_by:"",date_from:"",date_to:"",only_my_posts:""}),b=m({}),s=u=>{v.value=u},a=u=>{d.value.only_my_posts=u?"active":"",c()},c=()=>{r.value=!0,_.getNotices(d.value).then(u=>{if(u.code!==200)throw u;k.value=u.data.notices,x.value=u.data.announces}).catch(u=>{console.log(u)}).finally(()=>{r.value=!1})},C=(u,i)=>{b.value=x.value.find(t=>t.id==u),s(i)},$=()=>{v.value=""},N=u=>{d.value={...d.value,...u},c()};return Y(()=>{c()}),(u,i)=>(f(),U("div",Ce,[l("div",we,[l("div",Me,[l("div",null,[l("div",{class:q(["buttonSwichtNotices px-6 mx-3",{active:p.value=="notices"}]),onClick:i[0]||(i[0]=t=>p.value="notices")}," Noticias ",2)]),l("div",null,[l("div",{class:q(["buttonSwichtNotices px-6 mx-3",{active:p.value=="announces"}]),onClick:i[1]||(i[1]=t=>p.value="announces")},z(d.value.only_my_posts=="active"?"Mis anuncios":"Anuncios"),3)])]),l("div",Ne,[(p.value="announces")?(f(),V(w,{key:0,outline:"",color:"primary",icon:"eva-funnel-outline",onClick:i[2]||(i[2]=t=>v.value="filter")})):M("",!0)]),r.value?(f(),U("div",Ae,[n(J,{color:"primary",size:"7rem"})])):(f(),U("div",Ue,[p.value=="notices"?(f(),V(W,{key:0,notices:k.value},null,8,["notices"])):M("",!0),p.value=="announces"?(f(),V(K,{key:1,announces:x.value,myPost:d.value.only_my_posts=="active",onOpenModal:C},null,8,["announces","myPost"])):M("",!0)])),p.value=="announces"?(f(),U("div",je,[p.value=="announces"?(f(),V(X,{key:0,modelValue:y.value,"onUpdate:modelValue":i[6]||(i[6]=t=>y.value=t),color:"primary",size:"lg",icon:"eva-plus-outline",direction:"up"},{default:g(()=>[n(D,{class:"announceOption","label-position":"right",color:"primary",icon:"eva-plus-outline",label:"Crear anuncio",onClick:i[3]||(i[3]=t=>s("create_announce"))}),d.value.only_my_posts==""?(f(),V(D,{key:0,class:"announceOption","label-position":"right",color:"secondary",icon:"eva-archive-outline",label:"Mis anuncios",onClick:i[4]||(i[4]=t=>a(!0))})):(f(),V(D,{key:1,class:"announceOption","label-position":"right",color:"green-6",icon:"eva-archive-outline",label:"Todos los anuncios",onClick:i[5]||(i[5]=t=>a(!1))}))]),_:1},8,["modelValue"])):M("",!0)])):M("",!0),n(Se,{dialog:v.value=="create_announce",onCloseModal:$,onUpdateList:i[7]||(i[7]=t=>a(!0))},null,8,["dialog"]),n(Z,{dialog:v.value=="filter",typeSearch:p.value,isOnlyMyPost:d.value.only_my_posts,onCloseModal:$,onUpdateList:N},null,8,["dialog","typeSearch","isOnlyMyPost"]),Object.values(b.value).length>0?(f(),U(H,{key:3},[n(le,{dialog:v.value=="delete",announce:b.value,onCloseModal:$,onUpdateList:i[8]||(i[8]=t=>a(d.value.only_my_posts))},null,8,["dialog","announce"]),n(me,{dialog:v.value=="update",announce:b.value,onCloseModal:$,onUpdateList:i[9]||(i[9]=t=>a(d.value.only_my_posts))},null,8,["dialog","announce"])],64)):M("",!0)])]))}};export{he as default};
