import{Q as N}from"./QSpinnerDots-C4tArpGa.js";import{Q as P}from"./QTooltip-DLGKm_pr.js";import{_ as R,r as p,G as A,e as r,f as t,H as d,i as c,g as l,F as I,j as Y,I as q,w as n,x as B,q as F,o as a,t as i,n as E,l as m,D as x,A as f,B as y,v as G}from"./index-BSBF4jGH.js";import{Q as g,a as h}from"./QItem-D2c8Co2M.js";import{Q as L}from"./QSeparator-BBtHUKtx.js";import{Q as J}from"./QList-DPQjt_4m.js";import{Q as O}from"./QMenu-DSB_uF9S.js";import{C as k}from"./ClosePopup-CTuEMMh8.js";import{u as U}from"./reserve.store-B7o8BB79.js";import{h as Q}from"./moment-BLMuvzoS.js";import{_ as K}from"./cancelReserveModal-B2YXMlh5.js";import"./position-engine-DU4jhfDu.js";const W={class:"h-full",style:{overflow:"hidden"}},X={class:"",style:{height:"90%",overflow:"auto"}},Z={key:0,class:"flex justify-center items-center py-20"},ee={key:1,class:"px-4 py-6 md:px-28"},te={key:0,class:"space-y-3 md:px-5"},se={class:"px-4 pb-4 pt-2 border-b border-dashed border-gray-300"},oe={class:"flex justify-between items-start mb-2"},ae={class:"flex-1"},ne={class:"text-lg font-bold text-gray-900 mb-2"},le={class:"flex items-center space-x-4"},re={class:"w-16 h-16 bg-gray-200 rounded-xl flex items-center justify-center flex-shrink-0"},ie=["innerHTML"],de={class:"flex-1 space-y-2"},ue={class:"flex items-center text-sm text-gray-700"},ce={class:"font-medium"},me={class:"flex items-center text-sm text-gray-700"},fe={class:"font-medium"},_e={class:"flex items-center text-sm text-gray-700"},ve=["innerHTML"],pe={class:"font-medium"},xe={class:"p-4 bg-gray-50"},ye={class:"flex justify-between items-center"},ge={class:"flex items-center"},he={key:0,class:"w-5 h-5 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ke={key:1,class:"w-5 h-5 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},be={class:"text-sm font-medium text-gray-700"},we={class:"flex items-center"},Ce=["innerHTML"],Me={flat:"",rounded:"",color:"primary",size:"sm",class:"ml-3 cursor-pointer"},je=["innerHTML"],Be={key:1,class:"flex flex-col items-center justify-center py-20"},Le={class:"px-4 md:flex md:justify-center items-center md:w-full md:px-12",style:{height:"10%"}},Qe={class:"flex items-center py-2"},Te={__name:"reserveList",setup(De){Q.locale("es",{monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_")});const _=p([]),b=p(!1),T=U(),D=F(),w=p(""),C=p({}),M=()=>{b.value=!0,T.getReservesByUser().then(o=>{if(o.code!==200)throw o;_.value=o.data}).catch(o=>{console.log(o)}).finally(()=>{b.value=!1})},u=o=>{D.push(o)},H=o=>{const e=V(o);S(e.reserve),setTimeout(()=>{w.value=e.dialog},500)},S=o=>{C.value=_.value.find(e=>e.id==o)},V=o=>o.target.closest(".q-item").dataset,z=o=>o.amount>0?o.pay?o.pay.status==1?"Pendiente de aprobación":"Pagado":"No pagada":o.status==3?"Confirmado":"Cancelado",$=o=>o.amount>0?`S/. ${o.amount}`:"Gratis";return A(()=>{M()}),(o,e)=>(a(),r("div",W,[t("div",X,[b.value?(a(),r("div",Z,[l(N,{color:"primary",size:"7rem"})])):(a(),r("div",ee,[_.value.length>0?(a(),r("div",te,[(a(!0),r(I,null,Y(_.value,s=>{var j;return a(),r("div",{key:s.id,class:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden md:mb-5",style:{position:"relative"}},[t("div",se,[t("div",oe,[t("div",ae,[t("h3",ne,i(((j=s.comun_area)==null?void 0:j.name)||"Área Común"),1)]),t("span",{class:E(["bg-"+s.status_color,"inline-block px-3 py-2 text-xs font-bold text-white badgeReserve"])},i(s.status_label),3)]),t("div",le,[t("div",re,[t("div",{innerHTML:m(x)[s.comun_area.icon]},null,8,ie)]),t("div",de,[t("div",ue,[e[5]||(e[5]=t("svg",{class:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t("span",ce,i(m(Q)(s.date).format("DD MMM YYYY")),1)]),t("div",me,[e[6]||(e[6]=t("svg",{class:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",fe,i(s.time_from)+" - "+i(s.time_to),1)]),t("div",_e,[t("div",{innerHTML:m(x).moneyIcon},null,8,ve),t("span",pe,i($(s)),1)])])])]),t("div",xe,[t("div",ye,[t("div",ge,[s.status==3?(a(),r("svg",he,[...e[7]||(e[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(a(),r("svg",ke,[...e[8]||(e[8]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])),t("span",be,i(z(s)),1)]),t("div",we,[s.status==1?(a(),d(B,{key:0,unelevated:"",rounded:"",color:"warning",size:"sm",class:"ml-3",onClick:v=>u("/client/reserves/pay-reserve/"+s.id)},{default:n(()=>[l(P,{class:"bg-primary text-white text-body2",offset:[10,10]},{default:n(()=>[...e[9]||(e[9]=[f(" Proceder con el pago ",-1)])]),_:1}),t("div",{innerHTML:m(x).procedToPay},null,8,Ce)]),_:1},8,["onClick"])):c("",!0),t("div",Me,[t("div",{innerHTML:m(x).optionsBook},null,8,je),l(O,null,{default:n(()=>[l(J,{style:{"min-width":"150px"}},{default:n(()=>[y((a(),d(g,{clickable:"",onClick:v=>u("/client/reserves/view/"+s.id)},{default:n(()=>[l(h,null,{default:n(()=>[...e[10]||(e[10]=[f("Ver detalles",-1)])]),_:1})]),_:1},8,["onClick"])),[[k]]),s.status!=0?y((a(),d(g,{key:0,clickable:"",onClick:e[0]||(e[0]=v=>H(v)),"data-dialog":"cancel","data-reserve":s.id},{default:n(()=>[l(h,null,{default:n(()=>[...e[11]||(e[11]=[f("Cancelar reserva",-1)])]),_:1})]),_:1},8,["data-reserve"])),[[k]]):c("",!0),l(L),s.status==1?y((a(),d(g,{key:1,clickable:"",onClick:v=>u("/client/reserves/pay-reserve/"+s.id)},{default:n(()=>[l(h,null,{default:n(()=>[...e[12]||(e[12]=[f("Pagar",-1)])]),_:1})]),_:1},8,["onClick"])),[[k]]):c("",!0),s.status==3?y((a(),d(g,{key:2,clickable:""},{default:n(()=>[l(h,null,{default:n(()=>[...e[13]||(e[13]=[f("Descarga pase",-1)])]),_:1})]),_:1})),[[k]]):c("",!0),l(L)]),_:2},1024)]),_:2},1024)])])])])])}),128))])):(a(),r("div",Be,[e[14]||(e[14]=q('<div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mb-6" data-v-d703362f><svg class="w-10 h-10 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-d703362f><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-d703362f></path></svg></div><h3 class="text-lg font-semibold text-gray-900 mb-2" data-v-d703362f>No tienes reservas</h3><p class="text-gray-600 text-center mb-6" data-v-d703362f>Aún no has realizado ninguna reserva de áreas comunes.</p>',3)),t("button",{onClick:e[1]||(e[1]=s=>u("/client/reserves/form/add")),class:"px-6 py-3 bg-blue-600 text-white rounded-full font-medium hover:bg-blue-700 transition-colors"}," Crear primera reserva ")]))]))]),t("div",Le,[l(B,{color:"primary",unelevated:"",class:"w-full mt-0 md:mx-24 createBookingButton md:w-full",style:{"border-radius":"0.5rem",width:"100%"},onClick:e[2]||(e[2]=s=>u("/client/reserves/form/add"))},{default:n(()=>[t("div",Qe,[l(G,{name:"eva-plus-outline"}),e[15]||(e[15]=t("div",{class:"q-pt-xs text-bold pl-1"}," Agregar reserva ",-1))])]),_:1})]),Object.values(C.value).length>0?(a(),d(K,{key:0,dialog:w.value=="cancel",reserve:C.value,onCloseModal:e[3]||(e[3]=s=>w.value=""),onUpdateList:e[4]||(e[4]=s=>M())},null,8,["dialog","reserve"])):c("",!0)]))}},Fe=R(Te,[["__scopeId","data-v-d703362f"]]);export{Fe as default};
