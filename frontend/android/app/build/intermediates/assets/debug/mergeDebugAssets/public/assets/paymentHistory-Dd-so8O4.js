import{r as _,E as D,H as P,o as d,w as u,g as a,y as R,f as e,x as f,l as p,A as v,Q as U,_ as q,G as H,e as n,F as N,j as T,I as A,q as E,i as j,t as w,v as I}from"./index-BSBF4jGH.js";import{Q as L}from"./QSpinnerDots-C4tArpGa.js";import{u as Y}from"./pay.store-76psuZaw.js";import{h as V}from"./moment-BLMuvzoS.js";import{Q as $}from"./QSelect-CSskTD8W.js";import{Q as F}from"./QInput-CCszA-Cu.js";import{R as G,a as M}from"./index-DJ-hPCxW.js";import"./use-key-composition-Z-2-MGMt.js";import"./use-id-BKlrVpl6.js";import"./QChip-C5Fpsmun.js";import"./QItem-D2c8Co2M.js";import"./QItemLabel-CTtt8RWV.js";import"./QMenu-DSB_uF9S.js";import"./position-engine-DU4jhfDu.js";import"./format-CoaQEihs.js";const O={class:"header-sectionModal",style:{"border-bottom":"1px solid lightgray"}},J={class:"flex justify-between items-center pr-5 pl-2 py-2"},K={class:"content-sectionModal"},W={class:"content__modalSectionRifa md:mt-0 mt-0 py-2"},X={class:"row pt-3 pb-2 px-5"},Z={class:"col-12"},ee={class:"col-12 my-2"},te={class:"col-12 my-2"},oe={class:"col-12 my-2"},se={class:"col-12 my-2"},le={class:"row py-4 px-5 pb-5",style:{"border-top":"1px solid lightgray"}},ae={class:"col-12"},ie={class:"row py-4 px-5 pb-5",style:{"border-top":"1px solid lightgray"}},re={class:"col-12"},de={class:"row py-4 px-5 pb-5",style:{"border-top":"1px solid lightgray"}},ne={class:"col-6 pr-1"},ue={class:"col-6 pl-1"},me={class:"row py-4 px-5",style:{"border-top":"1px solid lightgray"}},ce={class:"col-6 pr-1"},pe={class:"col-6 pl-1"},_e={class:"pb-5"},ve={class:"flex justify-evenly mt-2"},be={__name:"paymentFilterModal",props:{dialog:Boolean},emits:["closeModal","updateList"],setup(z,{emit:b}){const m=b,y=z,x=_(!1),c=_(y.dialog),g=()=>{m("closeModal")},s=_({status:4,pay_method:"",type:"",date_from:"",date_to:"",sort_by:"created_at",sort_dir:"desc"}),C=()=>{m("closeModal"),m("updateList",{...s.value})};D(()=>y.dialog,k=>{c.value=k});const h=()=>{s.value={status:4,pay_method:"",type:"",date_from:"",date_to:"",sort_by:"created_at",sort_dir:"desc"}};return(k,t)=>(d(),P(U,{modelValue:c.value,"onUpdate:modelValue":t[9]||(t[9]=l=>c.value=l),class:"filterDialog",persistent:"","backdrop-filter":"blur(0.5px)"},{default:u(()=>[a(R,{class:"dialog_document public py-2"},{default:u(()=>[e("div",O,[e("div",J,[a(f,{round:"",outline:"",icon:"eva-arrow-back-outline",color:"primary",onClick:t[0]||(t[0]=l=>(h(),g()))}),t[10]||(t[10]=e("div",{class:"text-2xl text-primary font-bold pt-1"}," Filtrar ",-1))])]),e("div",K,[e("section",W,[e("div",X,[t[15]||(t[15]=e("div",{class:"mb-1 text-lg font-medium text-primary"}," Estado de pago ",-1)),e("div",Z,[a(p(G),{modelValue:s.value.status,"onUpdate:modelValue":t[1]||(t[1]=l=>s.value.status=l),class:"row statusRadioGroup"},{default:u(()=>[e("div",ee,[a(p(M),{name:0,"icon-size":"1.3rem","label-position":"left"},{default:u(()=>[...t[11]||(t[11]=[v("Cancelado",-1)])]),_:1})]),e("div",te,[a(p(M),{name:1,"icon-size":"1.3rem","label-position":"left"},{default:u(()=>[...t[12]||(t[12]=[v("Pendiente",-1)])]),_:1})]),e("div",oe,[a(p(M),{name:2,"icon-size":"1.3rem","label-position":"left"},{default:u(()=>[...t[13]||(t[13]=[v("Exitoso",-1)])]),_:1})]),e("div",se,[a(p(M),{name:4,"icon-size":"1.3rem","label-position":"left"},{default:u(()=>[...t[14]||(t[14]=[v("Todas",-1)])]),_:1})])]),_:1},8,["modelValue"])])]),e("div",le,[t[16]||(t[16]=e("div",{class:"mb-3 text-lg font-medium text-primary col-12"}," Método de pago ",-1)),e("div",ae,[a($,{class:"form__inputsFilterPays",modelValue:s.value.pay_method,"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.pay_method=l),options:[{label:"Todos",value:""},{label:"Transferencia bancaria",value:1},{label:"Yape",value:2},{label:"Pago en efectivo",value:3}],"option-label":"label","option-value":"value","emit-value":"","map-options":"",label:"Selecciona método",dense:"",borderless:""},null,8,["modelValue"])])]),e("div",ie,[t[17]||(t[17]=e("div",{class:"mb-3 text-lg font-medium text-primary col-12"}," Tipo de pago ",-1)),e("div",re,[a($,{class:"form__inputsFilterPays",modelValue:s.value.type,"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.type=l),options:[{label:"Todos",value:""},{label:"Pago de quota",value:1},{label:"Pago de Reserva",value:2}],"option-label":"label","option-value":"value","emit-value":"","map-options":"",label:"Selecciona tipo",dense:"",borderless:""},null,8,["modelValue"])])]),e("div",de,[t[18]||(t[18]=e("div",{class:"mb-4 text-lg font-medium text-primary col-12"}," Rango de fechas de pago ",-1)),e("div",ne,[a(F,{class:"form__inputsFilterPays",dense:"",borderless:"",modelValue:s.value.date_from,"onUpdate:modelValue":t[4]||(t[4]=l=>s.value.date_from=l),type:"date",label:"Desde"},null,8,["modelValue"])]),e("div",ue,[a(F,{class:"form__inputsFilterPays",dense:"",borderless:"",modelValue:s.value.date_to,"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.date_to=l),type:"date",label:"Hasta"},null,8,["modelValue"])])]),e("div",me,[t[19]||(t[19]=e("div",{class:"mb-4 text-lg font-medium text-primary col-12"}," Ordenar por ",-1)),e("div",ce,[a($,{class:"form__inputsFilterPays",modelValue:s.value.sort_by,"onUpdate:modelValue":t[6]||(t[6]=l=>s.value.sort_by=l),options:[{label:"Creación",value:"created_at"},{label:"Fecha de pago",value:"pay_date"},{label:"Estado",value:"status"},{label:"Monto",value:"amount"}],"option-label":"label","option-value":"value","emit-value":"","map-options":"",dense:"",borderless:""},null,8,["modelValue"])]),e("div",pe,[a($,{class:"form__inputsFilterPays",modelValue:s.value.sort_dir,"onUpdate:modelValue":t[7]||(t[7]=l=>s.value.sort_dir=l),options:[{label:"Descendente",value:"desc"},{label:"Ascendente",value:"asc"}],"option-label":"label","option-value":"value","emit-value":"","map-options":"",dense:"",borderless:""},null,8,["modelValue"])])])]),e("section",_e,[e("div",ve,[a(f,{label:"Restablecer",unelevated:"",class:"q-mx-sm",color:"primary",outline:"",style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"},onClick:t[8]||(t[8]=l=>h())}),a(f,{label:"Aplicar",unelevated:"",class:"q-mx-sm",color:"primary",style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"},loading:x.value,onClick:C},null,8,["loading"])])])])]),_:1})]),_:1},8,["modelValue"]))}},fe={class:"h-full",style:{overflow:"hidden"}},ye={class:"flex justify-end pt-4 md:px-28 md:mx-5 mx-4"},xe={class:"h-full",style:{overflow:"auto"}},ge={key:0,class:"flex justify-center items-center py-20"},he={key:1,class:"px-4 py-6 md:px-28"},ke={key:0,class:"space-y-3 md:px-5"},we=["onClick"],Ve={class:"px-4 pb-4 pt-2"},$e={class:"flex justify-between items-start mb-0 pb-1",style:{"border-bottom":"1px dashed #111827"}},Me={class:"flex-1"},Ce={class:"text-lg font-bold text-gray-900 mb-1 titleQuota"},ze={key:0,class:"absolute top-2 right-2 bg-primary text-white text-xs font-bold px-2 py-1 rounded-md"},je={class:"space-y-2 pt-3"},Fe={class:"flex items-center text-sm text-gray-700"},Pe={class:"font-medium"},Qe={class:"flex items-center text-sm text-gray-700"},Se={class:"font-medium"},Be={class:"px-4 py-3 bg-gray-50 border-t border-gray-200"},De={class:"flex justify-between items-center"},Re={class:"flex items-center"},Ue={class:"ml-2 text-sm font-medium text-gray-700"},qe={class:"flex items-center"},He={key:1,class:"flex flex-col items-center justify-center py-20"},Ne={__name:"paymentHistory",setup(z){V.locale("es",{monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_")});const b=_([]),m=_(!0),y=Y(),x=E(),c=_(!1),g=_({status:4,pay_method:"",type:"",date_from:"",date_to:"",sort_by:"created_at",sort_dir:"desc"}),s=()=>{m.value=!0,y.getPaysByUser(g.value).then(o=>{if(o.code!==200)throw o;b.value=o.data}).catch(o=>{console.log(o)}).finally(()=>{m.value=!1})},C=o=>{let r=o.type===1?"/client/quota/view/"+o.quota_id:"/client/reserves/view/"+o.booking_id;x.push(r)},h=()=>{c.value=!0},k=o=>{g.value={...o},s()},t=()=>{c.value=!1},l=o=>{let r=o.type===1?o.quota.month_label:"#"+o.booking.booking_number;return`${o.title_pay} ${r}`},Q=o=>o?V(o).format("DD MMM YYYY"):"",S=o=>{o.vaucher&&x.push(`/client/payments/receipt/${o.id}`)};return H(()=>{s()}),(o,r)=>(d(),n("div",fe,[e("div",ye,[a(f,{outline:"",color:"primary",icon:"eva-funnel-outline",onClick:h})]),e("div",xe,[m.value?(d(),n("div",ge,[a(L,{color:"primary",size:"7rem"})])):(d(),n("div",he,[b.value.length>0?(d(),n("div",ke,[(d(!0),n(N,null,T(b.value,i=>(d(),n("div",{key:i.id,class:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden md:mb-5 cursor-pointer quotaItem",style:{position:"relative"},onClick:B=>C(i)},[e("div",Ve,[e("div",$e,[e("div",Me,[e("h3",Ce,[v(w(l(i))+" ",1),i.created_at&&p(V)(i.created_at).isAfter(p(V)().subtract(7,"days"))?(d(),n("span",ze," Nuevo ")):j("",!0)])])]),e("div",je,[e("div",Fe,[r[0]||(r[0]=e("svg",{class:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",Pe,"S/. "+w(i.amount),1)]),e("div",Qe,[r[1]||(r[1]=e("svg",{class:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",Se,"Fecha: "+w(Q(i.pay_date)),1)])])]),e("div",Be,[e("div",De,[e("div",Re,[a(I,{name:i.status_icon,color:i.status_color,size:"1.5rem"},null,8,["name","color"]),e("span",Ue,w(i.status_label),1)]),e("div",qe,[i.vaucher&&i.status===2?(d(),P(f,{key:0,flat:"",rounded:"",color:"primary",size:"sm",class:"ml-3",onClick:B=>S(i)},{default:u(()=>[...r[2]||(r[2]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),v(" Recibo ")],-1)])]),_:1},8,["onClick"])):j("",!0)])])])],8,we))),128))])):(d(),n("div",He,[...r[3]||(r[3]=[A('<div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mb-6" data-v-56f758bc><svg class="w-10 h-10 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-56f758bc><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" data-v-56f758bc></path></svg></div><h3 class="text-lg font-semibold text-gray-900 mb-2" data-v-56f758bc>No tienes pagos</h3><p class="text-gray-600 text-center mb-6" data-v-56f758bc>Aún no has realizado ningún pago.</p>',3)])]))]))]),a(be,{dialog:c.value,onCloseModal:t,onUpdateList:k},null,8,["dialog"])]))}},ot=q(Ne,[["__scopeId","data-v-56f758bc"]]);export{ot as default};
