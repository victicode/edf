import{Q as m}from"./QInput-CCszA-Cu.js";import{r as d,G as J,e as u,g as s,w as i,K as j,N as L,q as O,o as n,f as t,T as g,i as c,v as f,l as P,B as y,x as p,H as G,n as H,t as I}from"./index-BSBF4jGH.js";import{Q as $}from"./QDate-BLdu9_3G.js";import{Q as b}from"./QPopupProxy-C_r6gXi9.js";import{Q as k}from"./QTime-6RwcKHVB.js";import{Q as K}from"./QCheckbox-RjCswHd1.js";import{Q as S}from"./QSelect-CSskTD8W.js";import{Q as W}from"./QForm-n8jT9PtN.js";import{Q as X}from"./QSpinnerDots-C4tArpGa.js";import{C as x}from"./ClosePopup-CTuEMMh8.js";import{u as Z}from"./comunArea.store-BuWp1D4-.js";import{u as ee}from"./event.store-BYdYbnbP.js";import{h as A}from"./moment-BLMuvzoS.js";import"./use-key-composition-Z-2-MGMt.js";import"./use-id-BKlrVpl6.js";import"./use-render-cache-DLxPkVnQ.js";import"./format-CoaQEihs.js";import"./QMenu-DSB_uF9S.js";import"./position-engine-DU4jhfDu.js";import"./TouchPan-DZJlNQpP.js";import"./option-sizes-Bdbpte1t.js";import"./QChip-C5Fpsmun.js";import"./QItem-D2c8Co2M.js";import"./QItemLabel-CTtt8RWV.js";const te={class:"md:px-20 md:mx-16 h-full",style:{overflow:"hidden",position:"relative"}},oe={key:0,class:"h-full"},le={style:{height:"90%",overflow:"auto"}},se={key:0,class:"h-full"},ae={class:"w-full h-full"},ie={class:"pb-10"},re={class:"row w-full pt-5"},ne={class:"col-12 row"},de={class:"col-12 row md:px-5"},ue={class:"col-12 row mt-3 px-3 md:px-2"},me={class:"col-12"},ce={class:"col-12 mb-2"},pe={class:"col-12 row md:px-5"},ve={class:"col-12 row mt-3 px-3 md:px-2"},_e={class:"col-12"},fe={class:"row items-center justify-end"},ye={class:"col-12 row md:px-5"},be={class:"col-12 row mt-3 px-3 md:px-2"},xe={class:"col-6 pr-2 md:pr-4"},he={class:"row items-center justify-end"},Ve={class:"col-6 pl-2 md:pl-4"},we={class:"row items-center justify-end"},ge={key:0,class:"col-12 row mt-0 px-3 md:px-2"},ke={key:0,class:"h-full"},Se={class:"w-full h-full"},Ae={class:"pb-10"},De={class:"row w-full pt-5"},Qe={class:"col-12 row"},Me={class:"col-12 row md:px-5"},Ue={class:"col-12 row mt-3 px-3 md:px-2"},Ee={class:"col-12"},Ye={key:0,class:"col-12 row mt-3 px-3 md:px-2"},Ce={class:"col-12"},Ne={key:1,class:"col-12 row mt-3 px-3 md:px-2"},Re={class:"col-12"},Fe={style:{height:"10%"},class:"buttonSection"},Te={class:"row py-4"},ze={class:"col-6 flex flex-center"},Be={class:"py-1 md:py-1"},qe={key:1,class:"flex flex-center py-24 w-full"},ct={__name:"createEvent",setup(Je){const D={days:"Domingo_Lunes_Martes_Miércoles_Jueves_Viernes_Sábado".split("_"),daysShort:"Dom_Lun_Mar_Mié_Jue_Vie_Sáb".split("_"),months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),firstDayOfWeek:1,format24h:!0,pluralDay:"dias"},Q=Z(),M=ee(),U=j("emitter"),h=d([]),E=d({}),Y=O(),C=d(!0),V=d(!1),v=d(!1),r=d(1),o=d({name:"",description:"",date:"",location:"",area:"",typeArea:-1,time_from:"",time_to:""}),w=d([0]),N=()=>{r.value==2&&F(),r.value--},R=()=>{if(r.value==2){B();return}r.value++},F=()=>{o.value={name:"",description:"",date:"",location:"",area:"",typeArea:{value:-1,name:"Seleccione una opción"},time_from:"",time_to:""},C.value=!0},T=()=>{U.emit("pagTitle","Registra el evento"),Q.getAllComunAreas().then(a=>{if(a.code!==200)throw a;h.value=a.data,setTimeout(()=>{V.value=!0},100)}).catch(a=>{_("positive","Error al obtener areas comunes")})},z=a=>a>=A().format("YYYY/MM/DD"),_=(a,e)=>{L.create({color:a,message:e,timeout:2e3})},B=()=>{v.value=!0;const a=new FormData;a.append("title",o.value.title),a.append("description",o.value.description),a.append("date",o.value.date),a.append("time_from",o.value.time_from),a.append("time_to",o.value.time_to),a.append("type_location",o.value.typeArea),o.value.typeArea==1&&a.append("area",o.value.area.id),a.append("location",o.value.location),M.createEvent(a).then(e=>{console.log(e),_("positive","Evento registrado con exito"),setTimeout(()=>{v.value=!1,Y.go(-1)},500)}).catch(e=>{console.log(e),setTimeout(()=>{v.value=!1,_("negative","Error al registrar Evento")},1e3)})},q=a=>{a==1&&(o.value.location="."),a==2&&(o.value.area="")};return J(()=>{T()}),(a,e)=>(n(),u("div",te,[V.value?(n(),u("div",oe,[s(W,{onSubmit:e[13]||(e[13]=l=>R()),class:"h-full"},{default:i(()=>[t("div",le,[s(g,{name:"horizontal"},{default:i(()=>[r.value==1?(n(),u("div",se,[t("div",ae,[t("div",ie,[t("div",re,[t("div",ne,[t("div",de,[e[16]||(e[16]=t("div",{class:"col-12 text-subtitle1 headerSection my-1 py-2 px-4"}," Datos del evento ",-1)),t("div",ue,[t("div",me,[e[14]||(e[14]=t("div",{class:"text-subtitle2 text-black"}," Titulo del evento ",-1)),s(m,{dense:"",borderless:"",clearable:"",modelValue:o.value.title,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.title=l),class:"form__inputsReverse mt-1",color:"primary",rules:[l=>l&&l.length>0||"Nombre de area es requerido"]},null,8,["modelValue","rules"])]),t("div",ce,[e[15]||(e[15]=t("div",{class:"text-subtitle2 text-black",style:{"font-weight":"medium"}}," Descripción ",-1)),s(m,{dense:"",borderless:"",clearable:"",type:"textarea",modelValue:o.value.description,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.description=l),class:"form__inputsReverse mt-1",color:"primary"},null,8,["modelValue"])])])]),t("div",pe,[e[18]||(e[18]=t("div",{class:"col-12 text-subtitle1 headerSection my-1 py-2 px-4"}," Selecciona la fecha ",-1)),t("div",ve,[t("div",_e,[e[17]||(e[17]=t("div",{class:"text-subtitle2 text-black",style:{"font-weight":"medium"}}," Fecha del evento: ",-1)),s(m,{modelValue:o.value.date,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.date=l),rules:[l=>!!l||"Fecha es requerida"],dense:"",borderless:"",clearable:"",class:"form__inputsReverse mt-1",color:"primary"},{append:i(()=>[s(f,{name:"eva-calendar-outline",class:"cursor-pointer"},{default:i(()=>[s(b,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[s($,{mask:"DD-MM-YYYY",modelValue:o.value.date,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.date=l),options:z,"navigation-min-year-month":P(A)().format("YYYY/MM"),locale:D},{default:i(()=>[t("div",fe,[y(s(p,{label:"Aceptar",color:"primary",flat:""},null,512),[[x]])])]),_:1},8,["modelValue","navigation-min-year-month"])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])])])]),t("div",ye,[e[22]||(e[22]=t("div",{class:"col-12 text-subtitle1 headerSection my-1 py-2 px-4"}," Selecciona la hora ",-1)),t("div",be,[t("div",xe,[e[19]||(e[19]=t("div",{class:"text-subtitle2 text-black",style:{"font-weight":"medium"}}," Desde: ",-1)),s(m,{modelValue:o.value.time_from,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.time_from=l),mask:"time",rules:["time"],dense:"",borderless:"",clearable:"",class:"form__inputsReverse mt-1 q-pb-sm",color:"primary"},{append:i(()=>[s(f,{name:"eva-clock-outline",class:"cursor-pointer"},{default:i(()=>[s(b,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[s(k,{modelValue:o.value.time_from,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.time_from=l),"minute-options":w.value,format24h:""},{default:i(()=>[t("div",he,[y(s(p,{label:"Aceptar",color:"primary",flat:""},null,512),[[x]])])]),_:1},8,["modelValue","minute-options"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",Ve,[e[20]||(e[20]=t("div",{class:"text-subtitle2 text-black",style:{"font-weight":"medium"}}," Hasta: ",-1)),s(m,{modelValue:o.value.time_to,"onUpdate:modelValue":e[7]||(e[7]=l=>o.value.time_to=l),mask:"time",rules:["time"],dense:"",borderless:"",clearable:"",class:"form__inputsReverse mt-1 q-pb-sm",color:"primary"},{append:i(()=>[s(f,{name:"eva-clock-outline",class:"cursor-pointer"},{default:i(()=>[s(b,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[s(k,{modelValue:o.value.time_to,"onUpdate:modelValue":e[6]||(e[6]=l=>o.value.time_to=l),format24h:"","minute-options":w.value},{default:i(()=>[t("div",we,[y(s(p,{label:"Aceptar",color:"primary",flat:""},null,512),[[x]])])]),_:1},8,["modelValue","minute-options"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),E.value.type==2?(n(),u("div",ge,[s(K,{modelValue:o.value.is_exclusive,"onUpdate:modelValue":e[8]||(e[8]=l=>o.value.is_exclusive=l),color:"primary"},{default:i(()=>[...e[21]||(e[21]=[t("div",{class:"text-grey-9 mt-1"}," Reservar de forma exclusiva ",-1)])]),_:1},8,["modelValue"])])):c("",!0)])])])])])])):c("",!0)]),_:1}),s(g,{name:"horizontal"},{default:i(()=>[r.value==2?(n(),u("div",ke,[t("div",Se,[t("div",Ae,[t("div",De,[t("div",Qe,[t("div",Me,[e[27]||(e[27]=t("div",{class:"col-12 text-subtitle1 headerSection my-1 py-2 px-4"}," Datos de localidad ",-1)),t("div",Ue,[t("div",Ee,[e[23]||(e[23]=t("div",{class:"text-subtitle2 text-black"}," Usar area común ",-1)),s(S,{class:"form__inputsReverse mt-1",modelValue:o.value.typeArea,"onUpdate:modelValue":[e[9]||(e[9]=l=>o.value.typeArea=l),q],options:[{value:-1,name:"Seleccione una opción"},{value:1,name:"Si"},{value:2,name:"No"}],"option-label":"name","option-value":"value","emit-value":"","map-options":"",rules:[l=>l!=-1||"Debes seleccionar un recinto"],dense:"",borderless:""},null,8,["modelValue","rules"])])]),o.value.typeArea==1?(n(),u("div",Ye,[t("div",Ce,[e[24]||(e[24]=t("div",{class:"text-subtitle2 text-black"}," Selecciona el recinto/ubicación ",-1)),s(S,{class:"form__inputsReverse mt-1",modelValue:o.value.area,"onUpdate:modelValue":e[10]||(e[10]=l=>o.value.area=l),options:h.value,"option-label":"name","option-value":"value","emit-value":"","map-options":"",rules:[l=>l.value!=-1||"Debes seleccionar un recinto"],dense:"",borderless:""},null,8,["modelValue","options","rules"]),e[25]||(e[25]=t("div",{class:"text-grey-7",style:{"font-size":"0.7rem"}}," Al escoger un area común como recinto para el evento, se realizara una reservación exclusiva del area seleccionada, con la fecha y horas asignados en este formulario ",-1))])])):c("",!0),o.value.typeArea==2?(n(),u("div",Ne,[t("div",Re,[e[26]||(e[26]=t("div",{class:"text-subtitle2 text-black"}," Ubicación/Lugar ",-1)),s(m,{dense:"",borderless:"",clearable:"",modelValue:o.value.location,"onUpdate:modelValue":e[11]||(e[11]=l=>o.value.location=l),class:"form__inputsReverse mt-1",color:"primary",rules:[l=>l&&l.length>0||"Nombre de area es requerido"]},null,8,["modelValue","rules"])])])):c("",!0)])])])])])])):c("",!0)]),_:1})]),t("div",Fe,[t("div",Te,[t("div",ze,[r.value>1?(n(),G(p,{key:0,color:"grey-8",class:"",style:{width:"90%","border-radius":"0.5rem"},onClick:e[12]||(e[12]=l=>N())},{default:i(()=>[...e[28]||(e[28]=[t("div",{class:"py-1 md:py-1"}," Volver ",-1)])]),_:1})):c("",!0)]),t("div",{class:H(["flex flex-center",r.value==1?"col-12":"col-6"])},[s(p,{color:"primary",class:"",style:{width:"90%","border-radius":"0.5rem"},type:"submit",loading:v.value},{default:i(()=>[t("div",Be,I(r.value==3?"Guardar reserva":"Siguiente"),1)]),_:1},8,["loading"])],2)])])]),_:1})])):(n(),u("div",qe,[s(X,{color:"primary",size:"7rem"})]))]))}};export{ct as default};
