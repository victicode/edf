import{c as M,aO as T,aP as O,h as R,C as A,m as I,r as u,G as P,e as a,f as n,i as f,t as d,l as r,n as $,F as H,j as L,g as m,v as Q,x as k,D as q,O as D,q as F,N as J,o}from"./index-BSBF4jGH.js";import{u as g}from"./notice.store-DyU3Koa3.js";import{b as E}from"./vue3-zoomer.es-CLqq-9XB.js";const G='<rect x="0" y="0" width="100" height="100" fill="none"></rect><path d="M78,19H22c-6.6,0-12,5.4-12,12v31c0,6.6,5.4,12,12,12h37.2c0.4,3,1.8,5.6,3.7,7.6c2.4,2.5,5.1,4.1,9.1,4 c-1.4-2.1-2-7.2-2-10.3c0-0.4,0-0.8,0-1.3h8c6.6,0,12-5.4,12-12V31C90,24.4,84.6,19,78,19z" fill="currentColor"></path><circle cx="30" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;1;1" keyTimes="0;0.2;1" dur="1s" repeatCount="indefinite"></animate></circle><circle cx="50" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;0;1;1" keyTimes="0;0.2;0.4;1" dur="1s" repeatCount="indefinite"></animate></circle><circle cx="70" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;0;1;1" keyTimes="0;0.4;0.6;1" dur="1s" repeatCount="indefinite"></animate></circle>',U=M({name:"QSpinnerComment",props:T,setup(x){const{cSize:l,classes:c}=O(x);return()=>R("svg",{class:c.value,width:l.value,height:l.value,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:G})}}),Y={class:"h-full",style:{overflow:"hidden"}},K={key:0,class:"h-full pb-8",style:{overflow:"scroll"}},W={key:0,class:"px-4"},X={class:"mt-4 flex items-center justify-between relative position-relative"},Z={class:"text-h6 text-primary font-bold"},ee={class:"mt-4 text-sm text-stone-600",style:{"line-height":"1.5"}},te={key:0,class:"row md:mt-5"},se={key:1,class:"flex items-center mt-3"},ae={class:"mr-1 text-xs text-grey-7"},oe={class:"mt-5 text-xs text-stone-400",style:{"line-height":"1.5"}},ie={key:2,class:"mt-4 w-full justify-between flex items-center"},ne={key:1,class:"flex flex-col items-center justify-center py-20"},le={class:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mb-6"},re=["innerHTML"],ce={key:1,class:"flex justify-center column items-center py-20"},ve={__name:"noticesView",setup(x){const{user:l}=A(I()),c=u(!1),s=u({}),h=D(),C=F(),y=u([]),_=u([]),v=u(!1),b=()=>{c.value=!1,g().getNoticeById(h.params.id).then(t=>{Object.assign(s.value,t.data),N(s.value.img),_.value=JSON.parse(s.value.views)}).catch(t=>{console.log(t)}).finally(()=>{c.value=!0})},N=t=>{let e=JSON.parse(t);y.value=e},S=t=>{let{name:e,apartment:i}=JSON.parse(t);return`${e} - ${i}`},z=()=>{g().setViewer(h.params.id)},w=t=>{v.value=!0;const e={id:s.value.id,status:t};g().setNewStatus(e).then(i=>{V(i.data.status),setTimeout(()=>{C.go(-1)},1e3)}).catch(i=>{console.log(i)}).finally(()=>v.value=!1)},V=t=>{const e=t==2?"positive":"negative",i=t==2?"Publicación aprobada con exito":"Publicación rechazada";j(e,i)},j=(t,e)=>{J.create({color:t,message:e,timeout:2e3})};return P(()=>{z(),b()}),(t,e)=>{var i;return o(),a("section",Y,[c.value?(o(),a("div",K,[Object.values(s.value).length>0?(o(),a("div",W,[n("div",X,[n("div",Z," ► "+d(s.value.title),1),s.value.user_id==r(l).id||r(l).rol_id==1?(o(),a("div",{key:0,class:$(["notices-badgeStatusRelative px-3 ml-4","bg-"+s.value.status_color])},d(s.value.status_label),3)):f("",!0)]),n("div",ee,d(s.value.description),1),((i=y.value)==null?void 0:i.length)>0?(o(),a("div",te,[(o(!0),a(H,null,L(y.value,(p,B)=>(o(),a("div",{class:"col-12 mt-5 md:mt-0 col-md-6",key:B},[m(r(E),{src:p,alt:"post_image"},null,8,["src"])]))),128))])):f("",!0),s.value.user_id==r(l).id?(o(),a("div",se,[n("div",ae,"Visto por: "+d(_.value.length),1),m(Q,{name:"eva-eye-outline",size:"xs",color:"grey-7"})])):f("",!0),n("div",oe," Publicado por: "+d(s.value.type==1?"Administrador":S(s.value.data_contact)),1),r(l).rol_id==1&&s.value.status==1?(o(),a("div",ie,[m(k,{label:"Rechazar",unelevated:"",class:"q-mx-sm",color:"negative",outline:"",style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"},onClick:e[0]||(e[0]=p=>w(0)),loading:v.value},null,8,["loading"]),m(k,{label:"Aprobar",type:"submit",unelevated:"",class:"q-mx-sm",color:"primary",loading:v.value,style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"},onClick:e[1]||(e[1]=p=>w(2))},null,8,["loading"])])):f("",!0)])):(o(),a("div",ne,[n("div",le,[n("div",{innerHTML:r(q).megaphone},null,8,re)]),e[3]||(e[3]=n("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Error al intentar obtener noticia",-1)),n("p",{class:"text-primary text-center mb-6",style:{"text-decoration":"underline"},onClick:e[2]||(e[2]=p=>b())},"Reintentar.")]))])):(o(),a("div",ce,[m(U,{color:"primary",size:"5rem"}),e[4]||(e[4]=n("div",{class:"text-stone-500 text-center mx-12"},"Cargando información",-1))]))])}}};export{ve as default};
