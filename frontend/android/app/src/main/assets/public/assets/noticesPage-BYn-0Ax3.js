import{r as m,E as U,H as C,o as y,w as v,g as l,y as L,f as o,z as q,v as Q,x as S,Q as R,N as T,A as P,t as I,G as Y,e as j,i as M,n as E,F as G}from"./index-BSBF4jGH.js";import{Q as H}from"./QSpinnerDots-C4tArpGa.js";import{_ as J,a as W,Q as K,b as X,c as Z}from"./filterAnnouncesList-Df_4kDfD.js";import{u as F}from"./notice.store-DyU3Koa3.js";import{Q as D}from"./QInput-CCszA-Cu.js";import"./QSelect-CSskTD8W.js";import{Q as z}from"./QFile-CkLCNj0W.js";import{Q as B}from"./QForm-n8jT9PtN.js";import"./use-id-BKlrVpl6.js";import"./QItem-D2c8Co2M.js";import"./QSeparator-BBtHUKtx.js";import"./QList-DPQjt_4m.js";import"./QMenu-DSB_uF9S.js";import"./position-engine-DU4jhfDu.js";import"./ClosePopup-CTuEMMh8.js";import"./moment-BLMuvzoS.js";import"./index-DJ-hPCxW.js";import"./use-key-composition-Z-2-MGMt.js";import"./QChip-C5Fpsmun.js";import"./QItemLabel-CTtt8RWV.js";import"./format-CoaQEihs.js";const ee={class:"content__modalSectionRifa md:mt-5 py-0"},te={class:"row w-full px-4"},oe={class:"col-md-6 col-12 mt-1 px-2 md:px-12"},le={class:"col-md-6 col-12 mt-1 px-2 md:px-12"},ae={class:"col-md-6 col-12 mt-2 px-2 md:px-12"},se={class:"row items-center q-gutter-x-sm"},ie={class:"py-5"},ne={class:"flex justify-evenly mt-5"},re={__name:"createNoticeModal",props:{dialog:Boolean},emits:["closeModal","updateList"],setup($,{emit:V}){const x=V,u=$,k=F(),i=m(!1),d=m(u.dialog),n=m({title:"",description:"",group:0,category:0,imagen:[]}),c=()=>{x("closeModal"),_()},b=()=>{c(),x("updateList")},_=()=>{n.value={title:"",description:"",group:0,category:0,imagen:[]}},g=()=>{i.value=!0;const s=1,e=new FormData;e.append("title",n.value.title),e.append("description",n.value.description),e.append("group",n.value.group),e.append("category",n.value.category),e.append("type",s),n.value.imagen.forEach(t=>{e.append("img[]",t)}),k.createNotice(e).then(t=>{a("positive","Tu anuncio fue enviado para revisión"),b()}).catch(t=>{console.log(t),a("negative","Error al publicar anuncio")}).finally(()=>{i.value=!1})},a=(s,e)=>{T.create({color:s,message:e,timeout:2e3})},w=s=>{const e=s[0].failedPropValidation=="max-files"?"Solo se pueden publicar maximo 2 fotos por post":"Error al subir imagen, verifica que sea una imagen valida";a("negative",e)};return U(()=>u.dialog,s=>{d.value=s}),(s,e)=>(y(),C(R,{modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=t=>d.value=t),class:"createAnnounceDialog",persistent:"","backdrop-filter":"blur(0.5px)"},{default:v(()=>[l(L,{class:"dialog_document w-full",style:{"border-radius":"1rem"}},{default:v(()=>[l(B,{onSubmit:e[4]||(e[4]=t=>g())},{default:v(()=>[l(q,{class:"q-px-none"},{default:v(()=>[...e[6]||(e[6]=[o("div",{class:"text-h6 text-black pb-2 px-5",style:{"border-bottom":"1px solid lightgray"}}," Publicar noticia ",-1)])]),_:1}),o("section",ee,[o("div",te,[o("div",oe,[e[7]||(e[7]=o("div",{class:"text-subtitle2 text-black"}," Titulo * ",-1)),l(D,{dense:"",borderless:"",clearable:"",modelValue:n.value.title,"onUpdate:modelValue":e[0]||(e[0]=t=>n.value.title=t),class:"form__inputsR mt-1",color:"primary",rules:[t=>t&&t.length>0||"Titulo del anuncio es obligatorio"]},null,8,["modelValue","rules"])]),o("div",le,[e[8]||(e[8]=o("div",{class:"text-subtitle2 text-black"}," Descripción * ",-1)),l(D,{dense:"",borderless:"",type:"textarea",modelValue:n.value.description,"onUpdate:modelValue":e[1]||(e[1]=t=>n.value.description=t),class:"form__inputsR mt-1",color:"primary",rules:[t=>(N=>N&&N.length>0),t=>t&&t.length>30||"Debe contener minimo 30 caracteres"]},null,8,["modelValue","rules"])]),o("div",ae,[e[10]||(e[10]=o("div",{class:"text-subtitle2 text-black"}," Adjuntar imagen ",-1)),l(z,{modelValue:n.value.imagen,"onUpdate:modelValue":e[2]||(e[2]=t=>n.value.imagen=t),dense:"",borderless:"",clearable:"",class:"form__inputsR mt-1",color:"primary",multiple:"","max-files":2,accept:".jpg,.png,.webp,.jpeg image/*",onRejected:w},{append:v(()=>[l(Q,{name:"eva-folder-add-outline",class:"cursor-pointer"})]),selected:v(()=>[o("div",se,[l(Q,{name:"eva-checkmark-circle-2-outline",color:"positive",size:"sm"}),e[9]||(e[9]=o("div",null,"Archivo subido",-1))])]),_:1},8,["modelValue"])])])]),o("section",ie,[e[11]||(e[11]=o("div",{class:"w-full px-4 text-caption"}," Recuerda: Para publicar, debe estar solvente con tus pagos y esperar la validación del administrador. ",-1)),o("div",ne,[l(S,{label:"Cerrar",unelevated:"",class:"q-mx-sm",color:"primary",outline:"",style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"},onClick:e[3]||(e[3]=t=>c())}),l(S,{label:"Publicar",type:"submit",unelevated:"",class:"q-mx-sm",color:"primary",loading:i.value,style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"}},null,8,["loading"])])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},de={class:"content__modalSectionRifa md:mt-5 py-0"},ue={class:"row w-full px-4"},ce={class:"col-md-6 col-12 mt-1 px-2 md:px-12"},pe={class:"col-md-6 col-12 mt-1 px-2 md:px-12"},me={class:"col-md-6 col-12 mt-2 px-2 md:px-12"},ve={class:"row items-center q-gutter-x-sm"},ge={class:"py-5"},fe={class:"flex justify-evenly mt-5"},be={__name:"updateNoticeModal",props:{dialog:Boolean,notice:Object},emits:["closeModal","updateList"],setup($,{emit:V}){const x=V,u=$,k=F(),i=m(!1),d=m(u.dialog),n=()=>({title:u.notice.title,description:u.notice.description,group:0,category:0,imagen:u.notice.img?JSON.parse(u.notice.img):[]}),c=m(n()),b=()=>{x("closeModal")},_=()=>{b(),x("updateList")},g=()=>{i.value=!0;const s=1,e=new FormData;e.append("title",c.value.title),e.append("description",c.value.description),e.append("group",0),e.append("category",0),e.append("type",s),c.value.imagen.forEach(t=>{e.append("img[]",t)}),k.updateNotice(e,u.notice.id).then(t=>{a("positive","Tu anuncio fue enviado para revisión"),_()}).catch(t=>{console.log(t),a("negative","Error al publicar anuncio")}).finally(()=>{i.value=!1})},a=(s,e)=>{T.create({color:s,message:e,timeout:2e3})},w=s=>{const e=s[0].failedPropValidation=="max-files"?"Solo se pueden publicar maximo 2 fotos por post":"Error al subir imagen, verifica que sea una imagen valida";a("negative",e)};return U(()=>u.dialog,s=>{d.value=s,c.value=n()}),(s,e)=>(y(),C(R,{modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=t=>d.value=t),class:"updateNoticeDialog",persistent:"","backdrop-filter":"blur(0.5px)"},{default:v(()=>[l(L,{class:"dialog_document w-full",style:{"border-radius":"1rem"}},{default:v(()=>[l(B,{onSubmit:e[4]||(e[4]=t=>g())},{default:v(()=>[l(q,{class:"q-px-none"},{default:v(()=>[...e[6]||(e[6]=[o("div",{class:"text-h6 text-black pb-2 px-5",style:{"border-bottom":"1px solid lightgray"}}," Editar Noticia ",-1)])]),_:1}),o("section",de,[o("div",ue,[o("div",ce,[e[7]||(e[7]=o("div",{class:"text-subtitle2 text-black"}," Titulo * ",-1)),l(D,{dense:"",borderless:"",clearable:"",modelValue:c.value.title,"onUpdate:modelValue":e[0]||(e[0]=t=>c.value.title=t),class:"form__inputsR mt-1",color:"primary",rules:[t=>t&&t.length>0||"Titulo del anuncio es obligatorio"]},null,8,["modelValue","rules"])]),o("div",pe,[e[8]||(e[8]=o("div",{class:"text-subtitle2 text-black"}," Descripción * ",-1)),l(D,{dense:"",borderless:"",type:"textarea",modelValue:c.value.description,"onUpdate:modelValue":e[1]||(e[1]=t=>c.value.description=t),class:"form__inputsR mt-1",color:"primary",rules:[t=>(N=>N&&N.length>0),t=>t&&t.length>30||"Debe contener minimo 30 caracteres"]},null,8,["modelValue","rules"])]),o("div",me,[e[10]||(e[10]=o("div",{class:"text-subtitle2 text-black"}," Adjuntar imagen ",-1)),l(z,{modelValue:c.value.imagen,"onUpdate:modelValue":e[2]||(e[2]=t=>c.value.imagen=t),dense:"",borderless:"",clearable:"",class:"form__inputsR mt-1",color:"primary",multiple:"","max-files":2,accept:".jpg,.png,.webp,.jpeg image/*",onRejected:w},{append:v(()=>[l(Q,{name:"eva-folder-add-outline",class:"cursor-pointer"})]),selected:v(()=>[o("div",ve,[l(Q,{name:"eva-checkmark-circle-2-outline",color:"positive",size:"sm"}),e[9]||(e[9]=o("div",null,"Archivo subido",-1))])]),_:1},8,["modelValue"])])])]),o("section",ge,[e[11]||(e[11]=o("div",{class:"w-full px-4 text-caption"}," Recuerda: Para publicar, debe estar solvente con tus pagos y esperar la validación del administrador. ",-1)),o("div",fe,[l(S,{label:"Cerrar",unelevated:"",class:"q-mx-sm",color:"primary",outline:"",style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"},onClick:e[3]||(e[3]=t=>b())}),l(S,{label:"Publicar",type:"submit",unelevated:"",class:"q-mx-sm",color:"primary",loading:i.value,style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"}},null,8,["loading"])])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},ye={class:"px-5 py-4"},xe={class:"my-5 text-center text-lg",style:{"line-height":"1.7"}},_e={class:"mt-4 flex justify-between px-2"},Ve={__name:"deleteNoticeModal",props:{dialog:Boolean,notice:Object},emits:["closeModal","updateList"],setup($,{emit:V}){const x=V,u=$,k=F(),i=m(!1),d=m(u.dialog),n=()=>{x("closeModal")},c=()=>{n(),x("updateList")},b=()=>{i.value=!0,k.deleteNotices(u.notice.id).then(g=>{_("grey-5","La noticia fue eliminada"),c()}).catch(g=>{console.log(g),_("negative","Error al borrar noticia")}).finally(()=>{i.value=!1})},_=(g,a)=>{T.create({color:g,message:a,timeout:2e3})};return U(()=>u.dialog,g=>{d.value=g}),(g,a)=>(y(),C(R,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=w=>d.value=w),class:"deleteAnnounceDialog",persistent:"","backdrop-filter":"blur(0.5px)"},{default:v(()=>[l(L,{class:"dialog_document w-full",style:{"border-radius":"1rem"}},{default:v(()=>[o("div",ye,[o("div",xe,[a[1]||(a[1]=P(" ¿Seguro que deseas borrar la noticia: ",-1)),a[2]||(a[2]=o("br",null,null,-1)),o("b",null,I($.notice.title),1),a[3]||(a[3]=P(" ? ",-1))]),o("section",_e,[l(S,{color:"primary",label:"Cerrar",onClick:n}),l(S,{color:"primary",outline:"",label:"Borrar",onClick:b,loading:i.value},null,8,["loading"])])])]),_:1})]),_:1},8,["modelValue"]))}},$e={class:"h-full",style:{overflow:"hidden"}},ke={class:"h-full",style:{overflow:"auto",position:"relative"}},we={class:"flex justify-center mt-3 bg-stone-200 py-2 buttonsContainer"},Ne={class:"flex justify-end md:pr-5 px-4 mt-2"},Ce={key:0,class:"flex justify-center items-center py-20"},Se={key:1,class:"px-4 py-6 md:px-28"},Me={key:2,class:"createAnnouncesFloat"},We={__name:"noticesPage",setup($){const V=m([]),x=m([]),u=m(!0),k=F(),i=m("notices"),d=m(""),n=m(!1),c=m("active"),b=m({status:4,group:"",category:"",post_by:"",date_from:"",date_to:""}),_=m({}),g=p=>{d.value=p},a=()=>{u.value=!0,k.getNotices(b.value).then(p=>{if(p.code!==200)throw p;V.value=p.data.notices,x.value=p.data.announces}).catch(p=>{console.log(p)}).finally(()=>{u.value=!1})},w=(p,r)=>{_.value=V.value.find(f=>f.id==p),g(r)},s=()=>{d.value=""},e=()=>{const p={...b.value},{status:r}=p;let f="";r!=4&&(f="active-filter"),Object.values(p).forEach((O,h)=>{h!=0&&O!==""&&(f="active-filter")}),c.value=f},t=p=>{b.value={...b.value,...p},e(),a()},N=()=>{b.value={status:4,group:"",category:"",post_by:"",date_from:"",date_to:""},e()},A=p=>{i.value=p,N()};return Y(()=>{a()}),(p,r)=>(y(),j("div",$e,[o("div",ke,[o("div",we,[o("div",null,[o("div",{class:E(["buttonSwichtNotices px-6 mx-3",{active:i.value=="notices"}]),onClick:r[0]||(r[0]=f=>A("notices"))}," Noticias ",2)]),o("div",null,[o("div",{class:E(["buttonSwichtNotices px-6 mx-3",{active:i.value=="announces"}]),onClick:r[1]||(r[1]=f=>A("announces"))}," Anuncios ",2)])]),o("div",Ne,[i.value=="announces"?(y(),C(S,{key:0,outline:"",color:"primary",class:E(c.value),icon:"eva-funnel-outline",onClick:r[2]||(r[2]=f=>d.value="filter")},null,8,["class"])):M("",!0)]),u.value?(y(),j("div",Ce,[l(H,{color:"primary",size:"7rem"})])):(y(),j("div",Se,[i.value=="notices"?(y(),C(J,{key:0,notices:V.value,onOpenModal:w},null,8,["notices"])):M("",!0),i.value=="announces"?(y(),C(W,{key:1,announces:x.value,myPost:b.value.only_my_posts=="active"},null,8,["announces","myPost"])):M("",!0)])),i.value=="notices"?(y(),j("div",Me,[i.value=="notices"?(y(),C(K,{key:0,modelValue:n.value,"onUpdate:modelValue":r[4]||(r[4]=f=>n.value=f),color:"primary",size:"lg",icon:"eva-plus-outline",direction:"up"},{default:v(()=>[l(Z,{class:"noticeOption","label-position":"right",color:"primary",icon:"eva-plus-outline",label:"Crear noticia",onClick:r[3]||(r[3]=f=>g("create_notice"))})]),_:1},8,["modelValue"])):M("",!0)])):M("",!0),l(re,{dialog:d.value=="create_notice",onCloseModal:s,onUpdateList:r[5]||(r[5]=f=>a())},null,8,["dialog"]),l(X,{dialog:d.value=="filter",typeSearch:i.value,onCloseModal:s,onUpdateList:t},null,8,["dialog","typeSearch"]),Object.values(_.value).length>0?(y(),j(G,{key:3},[l(Ve,{dialog:d.value=="delete",notice:_.value,onCloseModal:s,onUpdateList:r[6]||(r[6]=f=>a())},null,8,["dialog","notice"]),l(be,{dialog:d.value=="update",notice:_.value,onCloseModal:s,onUpdateList:r[7]||(r[7]=f=>a())},null,8,["dialog","notice"])],64)):M("",!0)])]))}};export{We as default};
