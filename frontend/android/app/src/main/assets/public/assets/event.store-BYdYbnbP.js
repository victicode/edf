import{a2 as s,a3 as o}from"./index-BSBF4jGH.js";const h=s("Event",{actions:{async getEvents(t){return await new Promise((r,n)=>{if(!o.getToken())throw"";o.setHeader();const e=this.filterQuery(t),a="/api/events"+(e?`?${e}`:"");o.get(a).then(({data:i})=>{if(i.code!=200)throw i;r(i)}).catch(({response:i})=>{console.log(i),n(i.data.error)})})},async createEvent(t){return await new Promise((r,n)=>{if(!o.getToken())throw"";o.setHeader(),o.post("/api/events",t).then(({data:e})=>{if(e.code!=200)throw e;r(e)}).catch(({response:e})=>{console.log(e),e.data.code==403&&n(e.data),n(e.data.error)})})},async createEventPay(t){return await new Promise((r,n)=>{if(!o.getToken())throw"";o.setHeader(),o.post("/api/pays/events",t).then(({data:e})=>{if(e.code!=200)throw e;r(e)}).catch(({response:e})=>{console.log(e),n(e.data.error)})})},async getEventById(t){return await new Promise((r,n)=>{if(!o.getToken())throw"";o.setHeader(),o.get("/api/events/byId/"+t).then(({data:e})=>{if(e.code!=200)throw e;r(e)}).catch(({response:e})=>{console.log(e),n(e.data.error)})})},async getEventsByArea(t){return await new Promise((r,n)=>{if(!o.getToken())throw"";o.setHeader(),o.get("/api/events/byArea/"+t).then(({data:e})=>{if(e.code!=200)throw e;r(e)}).catch(({response:e})=>{console.log(e),n(e.data.error)})})},async updateEvent(t,r){return await new Promise((n,e)=>{if(!o.getToken())throw"";o.setHeader(),o.post("/api/events/"+r,t).then(({data:a})=>{if(a.code!=200)throw a;n(a)}).catch(({response:a})=>{console.log(a),a.data.code==403&&e(a.data),e(a.data.error)})})},async getAvailableEventInDayByArea(t){return await new Promise((r,n)=>{if(!o.getToken())throw"";o.setHeader(),o.get("/api/events/availableBooking/"+t.idArea+"?date="+t.date+"&").then(({data:e})=>{if(e.code!=200)throw e;r(e)}).catch(({response:e})=>{console.log(e),n(e.data.error)})})},async deleteEvent(t){return await new Promise((r,n)=>{if(!o.getToken())throw"";o.setHeader(),o.delete("/api/events/"+t).then(({data:e})=>{if(e.code!=200)throw e;r(e)}).catch(({response:e})=>{console.log(e),n(e.data.error)})})},async cancelEvent(t){return await new Promise((r,n)=>{if(!o.getToken())throw"";o.setHeader(),o.post("/api/events/cancel/"+t).then(({data:e})=>{if(e.code!=200)throw e;r(e)}).catch(({response:e})=>{console.log(e),n(e.data.error)})})},async getPendingEvent(){return await new Promise((t,r)=>{if(!o.getToken())throw"";o.setHeader(),o.get("/api/events/pendings").then(({data:n})=>{if(n.code!=200)throw n;t(n)}).catch(({response:n})=>{console.log(n),r(n.data.error)})})},async setAssitByData(t,r){return await new Promise((n,e)=>{if(!o.getToken())throw"";o.setHeader(),o.post("/api/events/set-assits/"+t,r).then(({data:a})=>{if(a.code!=200)throw a;n(a)}).catch(({response:a})=>{console.log(a),e(a.data.error)})})},filterQuery(t){try{const r=new URLSearchParams;return!t||typeof t!="object"?"":(t.status!==void 0&&Number(t.status)!==4&&r.set("status",String(t.status)),t.area_id&&r.set("area_id",String(t.area_id)),t.date_from&&r.set("date_from",String(t.date_from)),t.date_to&&r.set("date_to",String(t.date_to)),t.amount_type&&r.set("amount_type",String(t.amount_type)),t.sort_by&&r.set("sort_by",String(t.sort_by)),t.sort_dir&&r.set("sort_dir",String(t.sort_dir)),r.toString())}catch{return""}}}});export{h as u};
