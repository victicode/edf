import{Q as A}from"./QSpinnerDots-C4tArpGa.js";import{C as Y,m as H,r as d,O as I,G as T,e as n,f as e,g as c,t as a,A as L,l as x,D as O,i as R,F as q,w as j,x as E,n as V,v as y,I as F,q as J,o as i}from"./index-BSBF4jGH.js";import{u as Q}from"./event.store-BYdYbnbP.js";import{h as S}from"./moment-BLMuvzoS.js";const $={class:"min-h-screen relative overflow-hidden"},U={class:"relative pt-8 pb-0 md:px-6 px-3"},G={key:0,class:"flex flex-col items-center justify-center py-20"},K={key:1,class:"flex flex-col items-center justify-center py-20"},P={class:"text-gray-600 text-center mb-6"},W={key:2,class:"flex flex-col items-center md:px-28 md:mx-28"},X={class:"bg-white rounded-xl shadow-lg border border-gray-100 flex flex-col items-center w-full"},Z={class:"row w-full mb-3 items-start"},ee={class:"col-12 text-right"},te={class:"flex justify-end md:pb-1"},se={class:"px-4 py-2 dateFact text-primary text-md font-bold"},oe={class:"flex items-center col-12 px-2 pt-3 flex-nowrap"},le={class:""},ae={class:"bg-primary rounded-xl p-4"},ne=["innerHTML"],ie={class:""},re={class:"text-xl font-bold text-gray-900 md:mb-2 pl-3"},de={class:"text-gray-600 mt-1 pl-3"},ce={class:"w-full md:p-5 px-4 pt-5 mb-5",style:{"border-top":"1px solid lightgray"}},ue={class:"space-y-4"},ve={class:"flex justify-between items-center pb-2",style:{"border-bottom":"1px solid rgba(211, 211, 211, 0.534)"}},me={class:"text-gray-900 font-semibold"},fe={class:"flex justify-between items-center pb-2",style:{"border-bottom":"1px solid rgba(211, 211, 211, 0.534)"}},pe={class:"text-gray-900 font-semibold"},xe={class:"flex justify-between items-center pb-2",style:{"border-bottom":"1px solid rgba(211, 211, 211, 0.534)"}},ye={class:"text-gray-900 font-semibold"},be={key:0,class:"flex justify-between items-center pb-1"},ge={class:"w-full pb-5 row"},_e={class:"col-12 col-md-6 px-5"},he={class:"col-12 col-md-6 px-5"},we={key:1,class:"flex flex-center col-12"},ke={key:3,class:"flex flex-col items-center justify-center py-20"},Be={__name:"viewEvent",setup(Ce){const b=I(),B=J(),g=Q(),{user:f}=Y(H()),s=d(null),p=d(!1),v=d(!1),u=d(null),_=d(!0),m=b.params.id||b.query.id,r=d({}),h=async o=>{try{p.value=!0,u.value=null;const t=await g.getEventById(o);s.value=t.data,k()}catch(t){console.error("Error al obtener el evento:",t),u.value=t||"Error al cargar el evento"}finally{p.value=!1}},D=()=>{m&&h(m)},M=()=>{B.push("/client/events")},N=o=>{var l,C;return o&&(((C=(l=o.booking)==null?void 0:l.comun_area)==null?void 0:C.name)||o.location)||"---"},w=o=>{v.value=!0;const t={assitType:o};g.setAssitByData(s.value.id,t).then(l=>{console.log(l),s.value.assits=l.data.assits,s.value.not_assits=l.data.not_assits,k()}).catch(l=>{console.log(l)}).finally(()=>{v.value=!1})},k=()=>{let o=JSON.parse(s.value.assits),t=JSON.parse(s.value.not_assits);(o.includes(f.value.id)||t.includes(f.value.id))&&(_.value=!1),z()},z=()=>{let o=JSON.parse(s.value.assits);JSON.parse(s.value.not_assits),o.includes(f.value.id)?r.value={title:"Haz marcado que asistiras",icon:"eva-checkmark-outline",color:"positive"}:r.value={title:"Haz marcado que no asistiras",icon:"eva-close-outline",color:"negative"}};return T(()=>{m?h(m):u.value="ID de evento no proporcionado"}),(o,t)=>(i(),n("div",$,[e("div",U,[p.value?(i(),n("div",G,[c(A,{color:"primary",size:"4rem"}),t[3]||(t[3]=e("p",{class:"text-gray-600 font-medium mt-4"},"Cargando evento...",-1))])):u.value?(i(),n("div",K,[t[4]||(t[4]=e("div",{class:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mb-6"},[e("svg",{class:"w-10 h-10 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),t[5]||(t[5]=e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"¡Ups! Algo salió mal",-1)),e("p",P,a(u.value),1),e("button",{onClick:D,class:"px-6 py-3 bg-red-500 text-white rounded-full font-medium hover:bg-red-600 transition-colors"}," Reintentar ")])):s.value?(i(),n("div",W,[e("div",X,[e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[t[6]||(t[6]=e("span",{class:"text-grey-7 font-medium text-md"},"Creado el:",-1)),L(" "+a(x(S)(s.value.created_at).format("DD/MM/YYYY")),1)])])]),e("div",oe,[e("div",le,[e("div",ae,[e("div",{innerHTML:x(O).events},null,8,ne)])]),e("div",ie,[e("h1",re,a(s.value.title||"Evento"),1),e("p",de,a(s.value.description||"Sin descripción registrada"),1)])])]),e("div",ce,[e("div",ue,[e("div",ve,[t[7]||(t[7]=e("span",{class:"text-gray-600 font-medium"},"Fecha",-1)),e("span",me,a(x(S)(s.value.date).format("DD/MM/YYYY")),1)]),e("div",fe,[t[8]||(t[8]=e("span",{class:"text-gray-600 font-medium"},"Horario",-1)),e("span",pe,a(s.value.time_from)+" - "+a(s.value.time_to),1)]),e("div",xe,[t[9]||(t[9]=e("span",{class:"text-gray-600 font-medium"},"Ubicación",-1)),e("span",ye,a(N(s.value)),1)]),s.value.booking?(i(),n("div",be,[t[10]||(t[10]=e("span",{class:"text-gray-600 font-medium"},"Reserva asociada",-1)),e("span",{onClick:t[0]||(t[0]=()=>{}),class:"text-gray-900 font-semibold cursor-pointer",style:{"text-decoration":"underline"}}," #"+a(s.value.booking.booking_number),1)])):R("",!0)])]),e("div",ge,[_.value?(i(),n(q,{key:0},[e("div",_e,[c(E,{onClick:t[1]||(t[1]=l=>w(0)),class:"w-full flex flex-center py-3",outline:"",color:"primary","no-caps":"",style:{"border-radius":"0.8rem"},loading:v.value},{default:j(()=>[c(y,{name:"eva-bell-outline",class:"mx-2",size:"1.2rem"}),t[11]||(t[11]=e("div",null," No voy a asistir ",-1))]),_:1},8,["loading"])]),e("div",he,[c(E,{onClick:t[2]||(t[2]=l=>w(1)),class:"w-full flex flex-center py-3",unelevated:"",color:"primary","no-caps":"",style:{"border-radius":"0.8rem"},loading:v.value},{default:j(()=>[c(y,{name:"eva-bell-outline",class:"mx-2",size:"1.2rem"}),t[12]||(t[12]=e("div",null," Voy a asistir ",-1))]),_:1},8,["loading"])])],64)):(i(),n("div",we,[e("div",{class:V(["flex flex-center py-3 px-14 assistVote",`b-${r.value.color}`])},[c(y,{name:r.value.icon,color:r.value.color,size:"1.5rem",class:"text-bold"},null,8,["name","color"]),e("div",{class:V(["text-"+r.value.color,"text-bold ml-2"]),style:{"font-size":"1rem"}},a(r.value.title),3)],2)]))])])])):(i(),n("div",ke,[t[13]||(t[13]=F('<div class="w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-6"><svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h2 class="text-xl font-bold text-gray-900 mb-2">Evento no encontrado</h2><p class="text-gray-600 text-center mb-6"> El evento solicitado no existe o no tienes permisos para verlo. </p>',3)),e("button",{onClick:M,class:"px-6 py-3 bg-gray-500 text-white rounded-full font-medium hover:bg-gray-600 transition-colors"}," Volver al listado ")]))])]))}};export{Be as default};
