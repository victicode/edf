import{Q as y}from"./QInput-CCszA-Cu.js";import{r as d,E as I,G as h,H as q,o as b,w as s,g as a,L as R,M as A,f as o,t as f,A as B,J as E,e as x,q as O,N as $,T as C,i as _,v as j,x as U}from"./index-BSBF4jGH.js";import{Q as N}from"./QSelect-CSskTD8W.js";import{Q as T,a as P}from"./QItem-D2c8Co2M.js";import{Q as z}from"./QForm-n8jT9PtN.js";import{u as D}from"./apartment.store-DfQ6G_1F.js";import{Q as F}from"./QItemLabel-CTtt8RWV.js";import"./use-key-composition-Z-2-MGMt.js";import"./use-id-BKlrVpl6.js";import"./QChip-C5Fpsmun.js";import"./QMenu-DSB_uF9S.js";import"./position-engine-DU4jhfDu.js";import"./format-CoaQEihs.js";const L={__name:"phoneNumberInput",props:{modelValue:{type:String,default:""},label:{type:String,default:"TelÃ©fono"},placeholder:{type:String,default:"123-4567"},rules:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(g,{emit:V}){const w=V,S=g,p=d({label:"PE (+51)",value:"+51",flag:"ðŸ‡µðŸ‡ª"}),v=d(""),c=[{label:"VE (+58)",value:"+58",flag:"ðŸ‡»ðŸ‡ª"},{label:"US (+1)",value:"+1",flag:"ðŸ‡ºðŸ‡¸"},{label:"ES (+34)",value:"+34",flag:"ðŸ‡ªðŸ‡¸"},{label:"CO (+57)",value:"+57",flag:"ðŸ‡¨ðŸ‡´"},{label:"PE (+51)",value:"+51",flag:"ðŸ‡µðŸ‡ª"}],n=d(c),m=(i,l)=>{if(i===""){l(()=>{n.value=c});return}l(()=>{const r=i.toLowerCase();n.value=c.filter(k=>k.label.toLowerCase().indexOf(r)>-1)})};return I([p,v],([i,l])=>{w("update:modelValue",`${i.value}${l}`)}),h(()=>{const i=S.modelValue,l=c.find(r=>i.startsWith(r.value));l&&(p.value=l.value,v.value=i.substring(l.value.length))}),(i,l)=>(b(),q(y,{modelValue:v.value,"onUpdate:modelValue":l[1]||(l[1]=r=>v.value=r),placeholder:g.placeholder,borderless:"",clearable:"",class:"form__inputsSelect mt-2",rules:g.rules},{prepend:s(()=>[a(N,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=r=>p.value=r),options:n.value,onFilter:m,"input-debounce":"0",borderless:"","emit-value":"","map-options":"","options-dense":"",class:"prefixInput",style:{"min-width":"0.5rem"}},{option:s(r=>[a(T,R(A(r.itemProps)),{default:s(()=>[a(P,{avatar:""},{default:s(()=>[o("span",null,f(r.opt.flag),1)]),_:2},1024),a(P,null,{default:s(()=>[a(F,null,{default:s(()=>[B(f(r.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])]),_:1},8,["modelValue","placeholder","rules"]))}},M={class:"md:px-20 md:mx-16 px-2"},G={class:"text-center text-black text-h5 text-bold md:mt-4 mt-5 mb-3"},H={key:0,class:"row w-full"},J={class:"col-md-6 md:my-0 col-12 my-1 px-2 md:px-12"},W={class:"col-md-6 md:my-0 col-12 my-1 px-2 md:px-12"},K={class:"col-md-6 md:my-0 col-12 my-1 px-2 md:px-12"},X={class:"col-md-6 md:my-0 col-12 my-1 px-2 md:px-12"},Y={class:"col-md-6 md:my-0 col-12 my-1 px-2 md:px-12"},Z={class:"col-12 my-2 px-2 md:px-12 flex justify-end"},ee={key:0,class:"row w-full"},te={class:"col-md-6 md:my-0 col-12 my-1 mb-4 px-2 md:px-12"},le={class:"col-md-6 md:my-0 col-12 my-1 px-2 md:px-12"},oe={class:"w-full"},ae={class:"flex items-center justify-between w-full"},se={class:"text-subtitle1",style:{"font-weight":"500"}},ie={key:0,class:"text-positive text-subtitle2 pl-2"},re={key:0,class:"text-caption text-grey-6"},ue={class:"col-12 mb-2 mt-5 px-2 md:px-12 flex items-center justify-between"},de={class:"flex items-center",style:{width:"50%","box-sizing":"border-box"}},ne={class:"flex items-center justify-end",style:{width:"50%","box-sizing":"border-box"}},ke={__name:"createUser",props:{dialog:Boolean,rifa:Object},setup(g){const V=O(),w=E(),S=D(),p=d([]),v=d([{id:0,title:"Selecciona el tipo de usuario"},{id:2,title:"Propietario"},{id:3,title:"Inquilino"}]),c=()=>{S.getApartmentsByFind("available").then(u=>{console.log(u),p.value=[{id:0,number:"Selecciona un apartamento"},...u.data]})},n=d("true"),m=d(0),i=d(!1),l=d({name:"",username:"",email:"",phone:"",password:"",rol_id:{id:0,title:"Selecciona el tipo de usuario"},apartment:{id:0,number:"Selecciona un apartamento"},idApartament:0,idRol:1}),r=["Datos del usuario","AsignaciÃ³n del inmobiliario"],k=()=>{if(m.value==0){m.value++;return}i.value=!0,l.value.idApartament=l.value.apartment.id,l.value.idRol=l.value.rol_id.id,w.createUser(l.value).then(u=>{Q("positive","Usuario creado con exito"),setTimeout(()=>{i.value=!1,V.go(-1)},1e3)}).catch(u=>{console.log(u),i.value=!1,Q("negative",u)})},Q=(u,e)=>{$.create({color:u,message:e,timeout:2e3})};return h(()=>{c()}),(u,e)=>(b(),x("div",M,[o("div",G,f(r[m.value]),1),a(z,{onSubmit:e[9]||(e[9]=t=>k())},{default:s(()=>[a(C,{name:"horizontal"},{default:s(()=>[m.value==0?(b(),x("div",H,[o("div",J,[e[10]||(e[10]=o("div",{class:"text-subtitle2 text-bold text-black"}," Nombre completo ",-1)),a(y,{borderless:"",clearable:"",modelValue:l.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.name=t),class:"form__inputsR mt-2",color:"primary",rules:[t=>t&&t.length>0||"Nombre es requerido"]},null,8,["modelValue","rules"])]),o("div",W,[e[11]||(e[11]=o("div",{class:"text-subtitle2 text-bold text-black"}," Nombre de usuario ",-1)),a(y,{borderless:"",clearable:"",modelValue:l.value.username,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.username=t),class:"form__inputsR mt-2",color:"primary",rules:[t=>t&&t.length>0||"Nombre de usuario es requerido"]},null,8,["modelValue","rules"])]),o("div",K,[e[12]||(e[12]=o("div",{class:"text-subtitle2 text-bold text-black"}," Correo electronico ",-1)),a(y,{borderless:"",clearable:"",modelValue:l.value.email,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.email=t),class:"form__inputsR mt-2",color:"primary",rules:[t=>t&&t.length>0||"Correo electronico es requerido"]},null,8,["modelValue","rules"])]),o("div",X,[e[13]||(e[13]=o("div",{class:"text-subtitle2 text-bold text-black"}," ContraseÃ±a ",-1)),a(y,{borderless:"",clearable:"",modelValue:l.value.password,"onUpdate:modelValue":e[4]||(e[4]=t=>l.value.password=t),class:"form__inputsR mt-2",color:"primary",type:n.value?"password":"text",rules:[t=>t&&t.length>0||"ContraseÃ±a es requerida"]},{append:s(()=>[a(j,{name:n.value?"eva-eye-off-outline":"eva-eye-outline",class:"cursor-pointer",onClick:e[3]||(e[3]=t=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"])]),o("div",Y,[e[14]||(e[14]=o("div",{class:"text-subtitle2 text-bold text-black"}," Telefono ",-1)),a(L,{modelValue:l.value.phone,"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.phone=t),label:"Tu TelÃ©fono",placeholder:"412-1234567",class:"phoneUser",rules:[t=>!!t||"El telÃ©fono es requerido"]},null,8,["modelValue","rules"])]),o("div",Z,[a(U,{color:"primary ",style:{"border-radius":"0.5rem"},type:"submit",loading:i.value},{default:s(()=>[...e[15]||(e[15]=[o("div",{class:"px-10 py-1"}," Siguiente ",-1)])]),_:1},8,["loading"])])])):_("",!0)]),_:1}),a(C,{name:"horizontal"},{default:s(()=>[m.value==1?(b(),x("div",ee,[o("div",te,[e[16]||(e[16]=o("div",{class:"text-subtitle2 text-bold text-black"}," Tipo de usuario ",-1)),a(N,{borderless:"",class:"form__inputsR mt-2",modelValue:l.value.rol_id,"onUpdate:modelValue":e[6]||(e[6]=t=>l.value.rol_id=t),"option-value":"id","option-label":"title",options:v.value,behavior:"menu"},null,8,["modelValue","options"])]),o("div",le,[e[17]||(e[17]=o("div",{class:"text-subtitle2 text-bold text-black"}," Selecciona el apartamento ",-1)),a(N,{borderless:"",class:"form__inputsR mt-2",modelValue:l.value.apartment,"onUpdate:modelValue":e[7]||(e[7]=t=>l.value.apartment=t),"option-value":"id","option-label":"number",options:p.value,behavior:"menu"},{option:s(t=>[a(T,R(A(t.itemProps)),{default:s(()=>[o("div",oe,[o("div",ae,[o("div",se,f(t.opt.id!=0?"#":"")+" "+f(t.opt.number),1),t.opt.id!=0?(b(),x("div",ie," Disponible ")):_("",!0)]),t.opt.id!=0?(b(),x("div",re,f(t.opt.area)+" mtÂ² ",1)):_("",!0)])]),_:2},1040)]),_:1},8,["modelValue","options"])]),o("div",ue,[o("div",de,[a(U,{color:"grey-9 ",style:{"border-radius":"0.5rem"},onClick:e[8]||(e[8]=t=>m.value--)},{default:s(()=>[...e[18]||(e[18]=[o("div",{class:"px-8 py-1"}," Volver ",-1)])]),_:1})]),o("div",ne,[a(U,{color:"primary ",style:{"border-radius":"0.5rem"},type:"submit",loading:i.value},{default:s(()=>[...e[19]||(e[19]=[o("div",{class:"px-8 py-1"}," Siguiente ",-1)])]),_:1},8,["loading"])])])])):_("",!0)]),_:1})]),_:1})]))}};export{ke as default};
