import{q as j,r,E,H as L,o as n,w as l,g as a,y as I,f as t,z as M,A as h,t as f,x,Q as H,N as P,G as F,e as d,i as A,F as B,j as R,v as V,K as U,l as N,D as G,n as z}from"./index-BSBF4jGH.js";import{Q}from"./QTooltip-DLGKm_pr.js";import{Q as O}from"./QPagination-BX1f1nDH.js";import{Q as K}from"./QSpinnerDots-C4tArpGa.js";import{u as q}from"./comunArea.store-BuWp1D4-.js";import"./position-engine-DU4jhfDu.js";import"./QInput-CCszA-Cu.js";import"./use-key-composition-Z-2-MGMt.js";import"./use-id-BKlrVpl6.js";import"./format-CoaQEihs.js";const J={class:"content__modalSectionRifa md:mt-5 mt-0"},W={class:"px-2"},X={class:"text-h6 text-center text-black"},Y={class:"pb-5"},Z={class:"flex justify-evenly mt-5"},ee={__name:"deleteAreaModal",props:{dialog:Boolean,comunArea:Object},emits:["closeModal","updateList"],setup(k,{emit:C}){const c=C,w=q(),g=k;j();const u=r(!1),p=r(g.dialog),y=()=>{c("closeModal")},$=()=>{c("closeModal"),c("updateList")},_=()=>{u.value=!0,w.deleteComunArea(g.comunArea.id).then(i=>{u.value=!1,$()}).catch(()=>{u.value=!1,b("negative","Error al borrar area común")})},b=(i,s)=>{P.create({color:i,message:s,timeout:2e3})};return E(()=>g.dialog,i=>{p.value=i}),(i,s)=>(n(),L(H,{modelValue:p.value,"onUpdate:modelValue":s[2]||(s[2]=v=>p.value=v),class:"createPayMethodDialog",persistent:"","backdrop-filter":"blur(0.5px)"},{default:l(()=>[a(I,{class:"dialog_document public",style:{"border-radius":"1rem"}},{default:l(()=>[t("div",null,[a(M,{class:"q-px-none"},{default:l(()=>[...s[3]||(s[3]=[t("div",{class:"text-h6 text-center text-black pb-2",style:{"border-bottom":"1px solid lightgray"}}," Borrar area común ",-1)])]),_:1}),t("section",J,[a(M,{class:"q-pt-none q-px-sm"},{default:l(()=>[t("div",W,[t("div",X,[s[4]||(s[4]=h(" ¿Estas seguro de borrar ",-1)),t("b",null,'"'+f(k.comunArea.name)+'"',1),s[5]||(s[5]=h(" de areas comunes? ",-1))])])]),_:1})])]),t("section",Y,[t("div",Z,[a(x,{label:"No",unelevated:"",class:"q-mx-sm",color:"primary",outline:"",style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"},onClick:s[0]||(s[0]=v=>y())}),a(x,{label:"Si",unelevated:"",class:"q-mx-sm",color:"primary",outline:"",style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"},loading:u.value,onClick:s[1]||(s[1]=v=>_())},null,8,["loading"])])])]),_:1})]),_:1},8,["modelValue"]))}},te={class:"h-full",style:{overflow:"hidden"}},se={class:"px-4 pb-4 md:px-0 md:flex md:justify-end md:w-6/6"},oe={class:"flex items-center py-1"},ae={class:"pb-5",style:{overflow:"auto",height:"88%"}},le={key:0,class:"mt-5 md:mt-0 px-2 md:mx-24 pb-5"},ie={class:"flex items-center w-full pb-3"},ne={class:"imgItem__container w"},re=["innerHTML"],de={class:"px-2 infoItem"},ce={class:"text-bold text-black",style:{"font-weight":"bold","font-size":"1.3rem"}},me={class:"mt-1 ellipsis w-full",style:{"font-weight":"500","font-size":"0.89rem"}},ue={class:"mt-1",style:{"font-weight":"500","font-size":"0.89rem"}},pe={class:"mt-1",style:{"font-weight":"500","font-size":"0.89rem"}},ve={class:"flex w-full justify-end py-1",style:{"border-top":"1px solid lightgrey"}},fe={class:"position-relative relative"},xe={key:0,style:{},class:"flex flex-center countReserve-badge"},ge={class:"flex justify-center mt-4"},ye={key:1,class:"flex flex-center column py-24"},_e={class:"p-4",style:{"border-radius":"1rem",background:"#0284c729"}},be={key:1,class:"flex flex-center py-24"},Be={__name:"comunAreasList",setup(k){const C=q(),c=r(1),w=U("materialIcons"),g=r(""),u=r(0),p=r(1),y=r(!1),$=j(),_=r(!1),b=m=>{$.push(m)},i=r([]),s=r({}),v=()=>{y.value=!1;const m={page:c.value,search:g.value,filter:u.value};C.getPaginationComunArea(m).then(e=>{if(e.code!==200)throw e;i.value=e.data.data,p.value=e.data.last_page,setTimeout(()=>{y.value=!0},1e3)}).catch(()=>{})},T=m=>{s.value=i.value.find(e=>e.id==m),setTimeout(()=>{_.value=!0},500)},D=()=>{_.value=!1};return F(()=>{v()}),(m,e)=>(n(),d("div",te,[t("div",se,[a(x,{color:"primary",unelevated:"",class:"w-full mt-5 md:mx-24 createButton",style:{"border-radius":"0.5rem"},onClick:e[0]||(e[0]=o=>b("/admin/comun-area/form/add"))},{default:l(()=>[t("div",oe,[a(V,{name:"eva-plus-outline"}),e[5]||(e[5]=t("div",{class:"q-pt-xs text-bold pl-1"}," Agregar area común ",-1))])]),_:1})]),t("div",ae,[y.value?(n(),d("div",le,[i.value.length>0?(n(),d(B,{key:0},[(n(!0),d(B,null,R(i.value,o=>(n(),d("div",{class:"px-2 pt-3 mt-4 apartamentContainer relative",style:{},key:o.id},[t("div",ie,[t("div",ne,[t("div",{innerHTML:N(G).comunArea,class:"flex flex-center px-0 h-full"},null,8,re)]),t("div",de,[t("div",ce,f(o.name),1),t("div",me," Costo por uso: "+f(o.price==0?"Sin reserva":o.price+" S/.")+". ",1),t("div",ue," Garantia: "+f(o.warranty_price==0?"Sin garantia":o.warranty_price+" S/."),1),t("div",pe," Capacidad: "+f(o.capacity)+" persona(s) ",1)])]),t("div",ve,[t("div",fe,[a(x,{icon:N(w).outlinedFactCheck,class:"mx-1",flat:"",color:"yellow-9",round:"",size:"0.85rem",onClick:S=>b("/admin/comun-area/bookings/"+o.id+"/list")},{default:l(()=>[a(Q,{"transition-show":"flip-right","transition-hide":"flip-left",class:z("bg-black text-body2 px-2")},{default:l(()=>[...e[6]||(e[6]=[h(" Historial de reservas ",-1)])]),_:1})]),_:1},8,["icon","onClick"]),o.bookings_to_validate_count>0?(n(),d("div",xe,f(o.bookings_to_validate_count),1)):A("",!0)]),t("div",null,[a(x,{icon:"eva-settings-outline",class:"mx-1",flat:"",color:"primary",round:"",size:"0.85rem",onClick:S=>b("/admin/comun-area/form/update/"+o.id)},{default:l(()=>[a(Q,{"transition-show":"flip-right","transition-hide":"flip-left",class:z("bg-black text-body2 px-2")},{default:l(()=>[...e[7]||(e[7]=[h(" Editar area común ",-1)])]),_:1})]),_:1},8,["onClick"])]),t("div",null,[a(x,{icon:"eva-trash-2-outline",class:"mx-1",flat:"",color:"negative",round:"",size:"0.85rem",onClick:S=>T(o.id)},{default:l(()=>[a(Q,{"transition-show":"flip-right","transition-hide":"flip-left",class:z("bg-black text-body2 px-2")},{default:l(()=>[...e[8]||(e[8]=[h(" Borrar area común ",-1)])]),_:1})]),_:1},8,["onClick"])])]),e[9]||(e[9]=t("div",{class:"itemBadge md:px-7 px-4 py-1 bg-positive"}," Disponible ",-1))]))),128)),t("div",ge,[a(O,{modelValue:c.value,"onUpdate:modelValue":[e[1]||(e[1]=o=>c.value=o),e[2]||(e[2]=o=>m.getApartment())],color:"primary",max:p.value,"max-pages":4,"boundary-numbers":!1},null,8,["modelValue","max"])])],64)):(n(),d("div",ye,[t("div",_e,[a(V,{name:"eva-search-outline",size:"3rem",color:"primary"})]),e[10]||(e[10]=t("div",{class:"text-h6 text-primary mt-2"}," No se encontraron areas comúnes ",-1))]))])):(n(),d("div",be,[a(K,{color:"primary",size:"7rem"})]))]),Object.values(s.value).length>0?(n(),L(ee,{key:0,comunArea:s.value,dialog:_.value,onCloseModal:e[3]||(e[3]=o=>D()),onUpdateList:e[4]||(e[4]=o=>v())},null,8,["comunArea","dialog"])):A("",!0)]))}};export{Be as default};
