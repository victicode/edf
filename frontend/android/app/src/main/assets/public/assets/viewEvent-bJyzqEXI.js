import{Q as j}from"./QSpinnerDots-C4tArpGa.js";import{r as c,O as E,G as M,e as n,f as e,g as D,t as o,A as y,l as u,D as C,i as m,I as S,q as V,o as l}from"./index-BSBF4jGH.js";import{u as Y}from"./event.store-BYdYbnbP.js";import{h as b}from"./moment-BLMuvzoS.js";const B={class:"min-h-screen relative overflow-hidden"},N={class:"relative pt-8 pb-0 md:px-6 px-3"},I={key:0,class:"flex flex-col items-center justify-center py-20"},L={key:1,class:"flex flex-col items-center justify-center py-20"},H={class:"text-gray-600 text-center mb-6"},R={key:2,class:"flex flex-col items-center md:px-28 md:mx-28"},T={class:"bg-white rounded-xl shadow-lg border border-gray-100 flex flex-col items-center w-full"},A={class:"row w-full mb-3 items-start"},O={class:"col-12 text-right"},q={class:"flex justify-end md:pb-1"},z={class:"px-4 py-2 dateFact text-primary text-md font-bold"},F={class:"flex items-center col-12 px-2 pt-3 flex-nowrap"},J={class:""},Q={class:"bg-primary rounded-xl p-4"},U=["innerHTML"],G={class:""},K={class:"text-xl font-bold text-gray-900 md:mb-2 pl-3"},P={class:"text-gray-600 mt-1 pl-3"},W={class:"w-full md:p-5 px-4 pt-5 mb-5",style:{"border-top":"1px solid lightgray"}},X={class:"space-y-4"},Z={class:"flex justify-between items-center pb-2",style:{"border-bottom":"1px solid rgba(211, 211, 211, 0.534)"}},$={class:"text-gray-900 font-semibold"},ee={class:"flex justify-between items-center pb-2",style:{"border-bottom":"1px solid rgba(211, 211, 211, 0.534)"}},te={class:"text-gray-900 font-semibold"},se={class:"flex justify-between items-center pb-2",style:{"border-bottom":"1px solid rgba(211, 211, 211, 0.534)"}},oe={class:"text-gray-900 font-semibold"},ne={key:0,class:"flex justify-between items-center pb-1"},le={key:1,class:"flex justify-between items-center pb-2",style:{"border-bottom":"1px solid rgba(211, 211, 211, 0.534)"}},ae={class:"text-gray-900 font-semibold"},re={key:0,class:"text-gray-600 font-semibold"},ie={key:3,class:"flex flex-col items-center justify-center py-20"},ve={__name:"viewEvent",setup(de){const p=E(),g=V(),_=Y(),s=c(null),d=c(!1),r=c(null),i=p.params.id||p.query.id,v=async a=>{try{d.value=!0,r.value=null;const t=await _.getEventById(a);s.value=t.data}catch(t){console.error("Error al obtener el evento:",t),r.value=t||"Error al cargar el evento"}finally{d.value=!1}},h=()=>{i&&v(i)},k=()=>{g.push("/admin/events")},w=a=>{var f,x;return a&&(((x=(f=a.booking)==null?void 0:f.comun_area)==null?void 0:x.name)||a.location)||"---"};return M(()=>{i?v(i):r.value="ID de evento no proporcionado"}),(a,t)=>(l(),n("div",B,[e("div",N,[d.value?(l(),n("div",I,[D(j,{color:"primary",size:"4rem"}),t[1]||(t[1]=e("p",{class:"text-gray-600 font-medium mt-4"},"Cargando evento...",-1))])):r.value?(l(),n("div",L,[t[2]||(t[2]=e("div",{class:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mb-6"},[e("svg",{class:"w-10 h-10 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),t[3]||(t[3]=e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"¡Ups! Algo salió mal",-1)),e("p",H,o(r.value),1),e("button",{onClick:h,class:"px-6 py-3 bg-red-500 text-white rounded-full font-medium hover:bg-red-600 transition-colors"}," Reintentar ")])):s.value?(l(),n("div",R,[e("div",T,[e("div",A,[e("div",O,[e("div",q,[e("div",z,[t[4]||(t[4]=e("span",{class:"text-grey-7 font-medium text-md"},"Creado el:",-1)),y(" "+o(u(b)(s.value.created_at).format("DD/MM/YYYY")),1)])])]),e("div",F,[e("div",J,[e("div",Q,[e("div",{innerHTML:u(C).events},null,8,U)])]),e("div",G,[e("h1",K,o(s.value.title||"Evento"),1),e("p",P,o(s.value.description||"Sin descripción registrada"),1)])])]),e("div",W,[e("div",X,[e("div",Z,[t[5]||(t[5]=e("span",{class:"text-gray-600 font-medium"},"Fecha",-1)),e("span",$,o(u(b)(s.value.date).format("DD/MM/YYYY")),1)]),e("div",ee,[t[6]||(t[6]=e("span",{class:"text-gray-600 font-medium"},"Horario",-1)),e("span",te,o(s.value.time_from)+" - "+o(s.value.time_to),1)]),e("div",se,[t[7]||(t[7]=e("span",{class:"text-gray-600 font-medium"},"Ubicación",-1)),e("span",oe,o(w(s.value)),1)]),s.value.booking?(l(),n("div",ne,[t[8]||(t[8]=e("span",{class:"text-gray-600 font-medium"},"Reserva asociada",-1)),e("span",{onClick:t[0]||(t[0]=()=>{}),class:"text-gray-900 font-semibold cursor-pointer",style:{"text-decoration":"underline"}}," #"+o(s.value.booking.booking_number),1)])):m("",!0),s.value.assists!==null||s.value.not_assits!==null?(l(),n("div",le,[t[9]||(t[9]=e("span",{class:"text-gray-600 font-medium"},"Asistencia",-1)),e("span",ae,[y(o(JSON.parse(s.value.assits).length)+" asistirán ",1),s.value.not_assits!==null?(l(),n("span",re," / "+o(JSON.parse(s.value.not_assits).length)+" no asistirán ",1)):m("",!0)])])):m("",!0)])])])])):(l(),n("div",ie,[t[10]||(t[10]=S('<div class="w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-6"><svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h2 class="text-xl font-bold text-gray-900 mb-2">Evento no encontrado</h2><p class="text-gray-600 text-center mb-6"> El evento solicitado no existe o no tienes permisos para verlo. </p>',3)),e("button",{onClick:k,class:"px-6 py-3 bg-gray-500 text-white rounded-full font-medium hover:bg-gray-600 transition-colors"}," Volver al listado ")]))])]))}};export{ve as default};
