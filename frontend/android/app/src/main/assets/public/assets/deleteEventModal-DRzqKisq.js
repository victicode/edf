import{a as w,Q as C}from"./QItem-D2c8Co2M.js";import{Q as N}from"./QSeparator-BBtHUKtx.js";import{Q as A}from"./QList-DPQjt_4m.js";import{Q as H}from"./QMenu-DSB_uF9S.js";import{C as M}from"./ClosePopup-CTuEMMh8.js";import{_ as S,C as T,m as $,e as m,o as l,F as b,j as D,f as e,t as u,g as a,l as c,D as j,w as r,B as E,i as z,H as y,A as x,q as Y,r as L,E as F,y as I,x as Q,Q as q,N as J}from"./index-BSBF4jGH.js";import{h as V}from"./moment-BLMuvzoS.js";import{u as O}from"./event.store-BYdYbnbP.js";const R={key:0,class:"space-y-3 md:px-5"},P={class:"md:px-6 md:pt-4 pb-2 px-3 pt-2 border-gray-300"},U={class:"flex justify-between items-center mb-1"},G=["onClick"],K={class:"text-lg font-bold text-gray-900 mb-1 cursor-pointer"},W={class:"",style:{width:"10%"}},X={class:"ml-3 cursor-pointer md:flex md:justify-end"},Z=["innerHTML"],ee={class:"flex items-center space-x-4"},te={class:"w-16 h-16 bg-gray-200 rounded-xl flex items-center justify-center flex-shrink-0"},oe=["innerHTML"],se={class:"flex-1 space-y-2"},ne={class:"flex items-center text-sm text-gray-700"},le={class:"font-medium"},ie={class:"flex items-center text-sm text-gray-700"},re={class:"font-medium"},ae={class:"flex items-center text-sm text-gray-700"},de=["innerHTML"],me={class:"font-medium"},ce={key:1,class:"flex flex-col items-center justify-center py-20"},ue={__name:"eventsList",props:{events:{type:Array,default:[]}},emits:["selectEvent"],setup(f,{emit:h}){V.locale("es",{monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_")});const{user:p}=T($()),v=Y(),k=h,d=s=>{v.push(s)},_=s=>{var o;return((o=s==null?void 0:s.booking)==null?void 0:o.comun_area.name)||s.location||"---"},g=s=>{k("selectEvent",s)};return(s,t)=>f.events.length>0?(l(),m("div",R,[(l(!0),m(b,null,D(f.events,o=>(l(),m("div",{key:o.id,class:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden md:mb-5",style:{position:"relative"}},[e("div",P,[e("div",U,[e("div",{class:"ellipsis",style:{width:"90%"},onClick:n=>d("/client/events/view/"+o.id)},[e("h3",K,u(o.title||"Evento"),1)],8,G),e("div",W,[e("div",X,[e("div",{innerHTML:c(j).optionsBook},null,8,Z),a(H,null,{default:r(()=>[a(A,{style:{"min-width":"150px"}},{default:r(()=>[E((l(),y(C,{clickable:"",onClick:n=>d("/client/events/view/"+o.id)},{default:r(()=>[a(w,null,{default:r(()=>[...t[1]||(t[1]=[x("Ver detalles",-1)])]),_:1})]),_:1},8,["onClick"])),[[M]]),c(p).rol_id==1?(l(),m(b,{key:0},[E((l(),y(C,{clickable:"",onClick:n=>d("/admin/events/form/update/"+o.id)},{default:r(()=>[a(w,null,{default:r(()=>[...t[2]||(t[2]=[x("Editar evento",-1)])]),_:1})]),_:1},8,["onClick"])),[[M]]),a(N),E((l(),y(C,{clickable:"",onClick:n=>g(o.id),"data-dialog":"cancel","data-event":o.id},{default:r(()=>[a(w,null,{default:r(()=>[...t[3]||(t[3]=[x("Eliminar evento",-1)])]),_:1})]),_:1},8,["onClick","data-event"])),[[M]])],64)):z("",!0)]),_:2},1024)]),_:2},1024)])])]),e("div",ee,[e("div",te,[e("div",{innerHTML:c(j).events},null,8,oe)]),e("div",se,[e("div",ne,[t[4]||(t[4]=e("svg",{class:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",le,u(c(V)(o.date).format("DD MMM YYYY")),1)]),e("div",ie,[t[5]||(t[5]=e("svg",{class:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",re,u(o.time_from)+" - "+u(o.time_to),1)]),e("div",ae,[e("div",{innerHTML:c(j).location},null,8,de),e("span",me,u(_(o)),1)])])])]),t[6]||(t[6]=e("div",{class:"md:px-4 md:py-4 md:pb-0 pb-3 px-3 bg-gray-50"},[e("div",{class:"flex justify-end items-center"})],-1))]))),128))])):(l(),m("div",ce,[t[11]||(t[11]=e("div",{class:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mb-6"},[e("svg",{class:"w-10 h-10 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),c(p).rol_id==2?(l(),m(b,{key:0},[t[7]||(t[7]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"No hay eventos listados",-1)),t[8]||(t[8]=e("p",{class:"text-gray-600 text-center mb-6"},"Aún no han realizado ningun evento.",-1))],64)):(l(),m(b,{key:1},[t[9]||(t[9]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"No hay eventos listados",-1)),t[10]||(t[10]=e("p",{class:"text-gray-600 text-center mb-6"},"Aún no has realizado ningun evento.",-1)),e("button",{onClick:t[0]||(t[0]=o=>d("/admin/events/form/add")),class:"px-6 py-3 bg-blue-600 text-white rounded-full font-medium hover:bg-blue-700 transition-colors"}," Crear primer evento ")],64))]))}},Ce=S(ue,[["__scopeId","data-v-f55bec2a"]]),fe={class:"px-5 py-4"},pe={class:"my-5 text-center text-lg",style:{"line-height":"1.7"}},ve={class:"mt-4 flex justify-between px-2"},Me={__name:"deleteEventModal",props:{dialog:Boolean,event:Object},emits:["closeModal","updateList"],setup(f,{emit:h}){const p=h,v=f,k=O(),d=L(!1),_=L(v.dialog),g=()=>{p("closeModal")},s=()=>{g(),p("updateList")},t=()=>{d.value=!0,k.deleteEvent(v.event.id).then(n=>{o("warning","Evento fue eliminada"),s()}).catch(n=>{console.log(n),o("negative","Error al borrar evento")}).finally(()=>{d.value=!1})},o=(n,i)=>{J.create({color:n,message:i,timeout:2e3})};return F(()=>v.dialog,n=>{_.value=n}),(n,i)=>(l(),y(q,{modelValue:_.value,"onUpdate:modelValue":i[0]||(i[0]=B=>_.value=B),class:"deleteAnnounceDialog",persistent:"","backdrop-filter":"blur(0.5px)"},{default:r(()=>[a(I,{class:"dialog_document w-full",style:{"border-radius":"1rem"}},{default:r(()=>[e("div",fe,[e("div",pe,[i[1]||(i[1]=x(" ¿Seguro que deseas borrar el evento ",-1)),i[2]||(i[2]=e("br",null,null,-1)),e("b",null,u(f.event.title),1),i[3]||(i[3]=x(" ? ",-1))]),e("section",ve,[a(Q,{color:"primary",label:"Cerrar",onClick:g}),a(Q,{color:"primary",outline:"",label:"Borrar",onClick:t,loading:d.value},null,8,["loading"])])])]),_:1})]),_:1},8,["modelValue"]))}};export{Me as _,Ce as e};
