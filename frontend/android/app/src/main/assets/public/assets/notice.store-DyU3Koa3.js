import{a2 as s,a3 as r}from"./index-BSBF4jGH.js";const u=s("Notices",{state:()=>({group:[{name:"Información",value:0},{name:"Automotores",value:1},{name:"Empleos",value:2},{name:"Inmuebles",value:3},{name:"Oportunidades",value:4}],category:[[{name:"Información junta de condominio",value:0}],[{name:"Venta de automovil",value:0},{name:"Venta de maquinaria",value:1},{name:"Venta de respuesto",value:2},{name:"Compra de automovil",value:3},{name:"Compra de maquinaria",value:4},{name:"Compra de respuesto",value:5},{name:"Servicios",value:6}],[{name:"Oferta laboral",value:0},{name:"Servicios",value:1}],[{name:"Venta de inmueble",value:0},{name:"Alquier de inmueble",value:1},{name:"Servicios",value:2}],[{name:"Oportunidad",value:0}]]}),actions:{async getNotices(t){return await new Promise((a,o)=>{if(!r.getToken())throw"";r.setHeader();const e=this.filterQuery(t),n="/api/notices"+(e?`?${e}`:"");r.get(n).then(({data:i})=>{if(i.code!=200)throw i;a(i)}).catch(({response:i})=>{console.log(i),o(i.data.error)})})},async createNotice(t){return await new Promise((a,o)=>{if(!r.getToken())throw"";r.setHeader(),r.post("/api/notices",t).then(({data:e})=>{if(e.code!=200)throw e;a(e)}).catch(({response:e})=>{console.log(e),e.data.code==403&&o(e.data),o(e.data.error)})})},async getNoticeById(t){return await new Promise((a,o)=>{if(!r.getToken())throw"";r.setHeader(),r.get("/api/notices/byId/"+t).then(({data:e})=>{if(e.code!=200)throw e;a(e)}).catch(({response:e})=>{console.log(e),o(e.data.error)})})},async updateNotice(t,a){return await new Promise((o,e)=>{if(!r.getToken())throw"";r.setHeader(),r.post("/api/notices/"+a,t).then(({data:n})=>{if(n.code!=200)throw n;o(n)}).catch(({response:n})=>{console.log(n),n.data.code==403&&e(n.data),e(n.data.error)})})},async deleteNotices(t){return await new Promise((a,o)=>{if(!r.getToken())throw"";r.setHeader(),r.delete("/api/notices/"+t).then(({data:e})=>{if(e.code!=200)throw e;a(e)}).catch(({response:e})=>{console.log(e),o(e.data.error)})})},async getPendingNotices(){return await new Promise((t,a)=>{if(!r.getToken())throw"";r.setHeader(),r.get("/api/notices/pendings").then(({data:o})=>{if(o.code!=200)throw o;t(o)}).catch(({response:o})=>{console.log(o),a(o.data.error)})})},async setViewer(t){return await new Promise((a,o)=>{if(!r.getToken())throw"";r.setHeader(),r.post("/api/notices/set-viewer/"+t).then(({data:e})=>{if(e.code!=200)throw e;a(e)}).catch(({response:e})=>{console.log(e),o(e.data.error)})})},async setNewStatus(t){return await new Promise((a,o)=>{if(!r.getToken())throw"";r.setHeader(),r.post("/api/notices/set-new-status/"+t.id,t).then(({data:e})=>{if(e.code!=200)throw e;a(e)}).catch(({response:e})=>{console.log(e),o(e.data.error)})})},async getUserWithPublish(){return await new Promise((t,a)=>{if(!r.getToken())throw"no-data";r.setHeader(),r.get("/api/users/with-publish").then(({data:o})=>{if(o.code!=200)throw o;t(o)}).catch(({response:o})=>{console.log(o),a(o.data.error)})})},filterQuery(t){try{const a=new URLSearchParams;return!t||typeof t!="object"?"":(t.status!==void 0&&Number(t.status)!==4&&a.set("status",String(t.status)),t.group&&t.group!==-1&&a.set("group",String(t.group)),t.category&&t.category!==-1&&a.set("category",String(t.category)),t.post_by&&t.post_by!==-1&&a.set("post_by",String(t.post_by)),t.date_from&&a.set("date_from",String(t.date_from)),t.date_to&&a.set("date_to",String(t.date_to)),t.only_my_posts&&a.set("only_my_posts",String(t.only_my_posts)),a.toString()+"&")}catch{return""}},getCategoryByGroup(t){return this.category[t]}}});export{u};
