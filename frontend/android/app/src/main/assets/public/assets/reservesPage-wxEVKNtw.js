import{Q as N}from"./QSpinnerDots-C4tArpGa.js";import{q as G,r as p,E as I,G as P,H as w,o as d,w as r,g as s,y as E,f as e,x as V,l as m,A as _,Q as q,_ as Y,e as c,i as S,F as O,j as J,I as D,t as v,n as Z,D as j,B as L}from"./index-BSBF4jGH.js";import{Q as W}from"./QTooltip-DLGKm_pr.js";import{Q as F,a as T}from"./QItem-D2c8Co2M.js";import{Q as X}from"./QSeparator-BBtHUKtx.js";import{Q as K}from"./QList-DPQjt_4m.js";import{Q as ee}from"./QMenu-DSB_uF9S.js";import{C as A}from"./ClosePopup-CTuEMMh8.js";import{u as te}from"./reserve.store-B7o8BB79.js";import{h as H}from"./moment-BLMuvzoS.js";import{_ as oe}from"./cancelReserveModal-B2YXMlh5.js";import{Q as C}from"./QSelect-CSskTD8W.js";import{Q as U}from"./QInput-CCszA-Cu.js";import{u as se}from"./comunArea.store-BuWp1D4-.js";import{R as le,a as h}from"./index-DJ-hPCxW.js";import"./position-engine-DU4jhfDu.js";import"./use-key-composition-Z-2-MGMt.js";import"./use-id-BKlrVpl6.js";import"./QChip-C5Fpsmun.js";import"./QItemLabel-CTtt8RWV.js";import"./format-CoaQEihs.js";const ae={class:"header-sectionModal",style:{"border-bottom":"1px solid lightgray"}},ie={class:"flex justify-between items-center pr-5 pl-2 py-2"},ne={class:"content-sectionModal"},re={class:"content__modalSectionRifa md:mt-0 mt-0 py-2"},de={class:"row pt-3 pb-2 px-5"},ue={class:"col-12"},me={class:"col-12 my-2"},pe={class:"col-12 my-2"},ce={class:"col-12 my-2"},ve={class:"col-12 my-2"},_e={class:"col-12 my-2"},fe={class:"row py-4 px-5",style:{"border-top":"1px solid lightgray"}},be={class:"col-12"},ye={class:"row py-4 px-5",style:{"border-top":"1px solid lightgray"}},xe={class:"col-6 pr-1"},ge={class:"col-6 pl-1"},ke={class:"row py-4 px-5",style:{"border-top":"1px solid lightgray"}},he={class:"col-12"},we={class:"row py-4 px-5",style:{"border-top":"1px solid lightgray"}},Ve={class:"col-6 pr-1"},$e={class:"col-6 pl-1"},Ce={class:"pb-5"},Me={class:"flex justify-evenly mt-2"},Qe={__name:"filterModal",props:{dialog:Boolean},emits:["closeModal","updateList"],setup(z,{emit:y}){const f=y,$=z;G();const M=p(!1),u=p($.dialog),g=()=>{f("closeModal")},l=p({status:4,area_id:"",date_from:"",date_to:"",amount_type:"",sort_by:"created_at",sort_dir:"desc"}),x=p([]),Q=()=>{f("closeModal"),f("updateList",{...l.value})};I(()=>$.dialog,b=>{u.value=b});const k=()=>{l.value={status:4,area_id:"",date_from:"",date_to:"",amount_type:"",sort_by:"created_at",sort_dir:"desc"}},B=()=>{se().getAllComunAreas().then(b=>{b.code===200&&(x.value=(b.data||[]).map(t=>({label:t.name,value:t.id})))})};return P(()=>{B()}),(b,t)=>(d(),w(q,{modelValue:u.value,"onUpdate:modelValue":t[9]||(t[9]=a=>u.value=a),class:"filterDialog",persistent:"","backdrop-filter":"blur(0.5px)"},{default:r(()=>[s(E,{class:"dialog_document public"},{default:r(()=>[e("div",ae,[e("div",ie,[s(V,{round:"",outline:"",icon:"eva-arrow-back-outline",color:"primary",onClick:t[0]||(t[0]=a=>(k(),g()))}),t[10]||(t[10]=e("div",{class:"text-2xl text-primary font-bold pt-1"}," Filtrar ",-1))])]),e("div",ne,[e("section",re,[e("div",de,[t[16]||(t[16]=e("div",{class:"mb-1 text-lg font-medium text-primary"}," Estado de pago ",-1)),e("div",ue,[s(m(le),{modelValue:l.value.status,"onUpdate:modelValue":t[1]||(t[1]=a=>l.value.status=a),class:"row statusRadioGroup"},{default:r(()=>[e("div",me,[s(m(h),{name:0,"icon-size":"1.3rem","label-position":"left"},{default:r(()=>[...t[11]||(t[11]=[_("Canceladas",-1)])]),_:1})]),e("div",pe,[s(m(h),{name:1,"icon-size":"1.3rem","label-position":"left"},{default:r(()=>[...t[12]||(t[12]=[_("Pendientes",-1)])]),_:1})]),e("div",ce,[s(m(h),{name:2,"icon-size":"1.3rem","label-position":"left"},{default:r(()=>[...t[13]||(t[13]=[_("Pagos Pendientes",-1)])]),_:1})]),e("div",ve,[s(m(h),{name:3,"icon-size":"1.3rem","label-position":"left"},{default:r(()=>[...t[14]||(t[14]=[_("Completas",-1)])]),_:1})]),e("div",_e,[s(m(h),{name:4,"icon-size":"1.3rem","label-position":"left"},{default:r(()=>[...t[15]||(t[15]=[_("Todas",-1)])]),_:1})])]),_:1},8,["modelValue"])])]),e("div",fe,[t[17]||(t[17]=e("div",{class:"mb-3 text-lg font-medium text-primary col-12"}," Area reservada ",-1)),e("div",be,[s(C,{class:"form__inputsFilterBookings",modelValue:l.value.area_id,"onUpdate:modelValue":t[2]||(t[2]=a=>l.value.area_id=a),options:x.value,"option-label":"label","option-value":"value","emit-value":"","map-options":"","use-input":"","input-debounce":"200",label:"Selecciona un 치rea",dense:"",borderless:""},null,8,["modelValue","options"])])]),e("div",ye,[t[18]||(t[18]=e("div",{class:"mb-4 text-lg font-medium text-primary col-12"}," Rango de fechas de reservaci칩n ",-1)),e("div",xe,[s(U,{class:"form__inputsFilterBookings",dense:"",borderless:"",modelValue:l.value.date_from,"onUpdate:modelValue":t[3]||(t[3]=a=>l.value.date_from=a),type:"date",label:"Desde"},null,8,["modelValue"])]),e("div",ge,[s(U,{class:"form__inputsFilterBookings",dense:"",borderless:"",modelValue:l.value.date_to,"onUpdate:modelValue":t[4]||(t[4]=a=>l.value.date_to=a),type:"date",label:"Hasta"},null,8,["modelValue"])])]),e("div",ke,[t[19]||(t[19]=e("div",{class:"mb-4 text-lg font-medium text-primary col-12"}," Tipo de monto ",-1)),e("div",he,[s(C,{class:"form__inputsFilterBookings",modelValue:l.value.amount_type,"onUpdate:modelValue":t[5]||(t[5]=a=>l.value.amount_type=a),options:[{label:"Todos",value:""},{label:"Gratis",value:"free"},{label:"Con pago",value:"paid"}],"option-label":"label","option-value":"value","emit-value":"","map-options":"",label:"Monto",dense:"",borderless:""},null,8,["modelValue"])])]),e("div",we,[t[20]||(t[20]=e("div",{class:"mb-4 text-lg font-medium text-primary col-12"}," Ordenar por ",-1)),e("div",Ve,[s(C,{class:"form__inputsFilterBookings",modelValue:l.value.sort_by,"onUpdate:modelValue":t[6]||(t[6]=a=>l.value.sort_by=a),options:[{label:"Creaci칩n",value:"created_at"},{label:"Fecha reserva",value:"date"},{label:"Estado",value:"status"},{label:"Monto",value:"amount"}],"option-label":"label","option-value":"value","emit-value":"","map-options":"",dense:"",borderless:""},null,8,["modelValue"])]),e("div",$e,[s(C,{class:"form__inputsFilterBookings",modelValue:l.value.sort_dir,"onUpdate:modelValue":t[7]||(t[7]=a=>l.value.sort_dir=a),options:[{label:"Descendente",value:"desc"},{label:"Ascendente",value:"asc"}],"option-label":"label","option-value":"value","emit-value":"","map-options":"",dense:"",borderless:""},null,8,["modelValue"])])])]),e("section",Ce,[e("div",Me,[s(V,{label:"Restablecer",unelevated:"",class:"q-mx-sm",color:"primary",outline:"",style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"},onClick:t[8]||(t[8]=a=>k())}),s(V,{label:"Aplicar",unelevated:"",class:"q-mx-sm",color:"primary",style:{"border-radius":"0.8rem",padding:"0px  2rem!important","font-size":"1rem"},loading:M.value,onClick:Q},null,8,["loading"])])])])]),_:1})]),_:1},8,["modelValue"]))}},Be={class:"h-full",style:{overflow:"hidden"}},Re={class:"",style:{height:"100%",overflow:"auto"}},Se={key:0,class:"flex justify-center items-center py-20"},je={key:1,class:"px-4 pb-6 pt-3 md:px-28"},ze={class:"flex justify-end md:pr-5 pr-1"},De={key:0,class:"space-y-3 pt-3 md:px-5"},Le={class:"px-0 pb-4 pt-2 border-b border-dashed border-gray-300"},Fe={class:"flex justify-between items-start mb-2 px-4"},Te={class:"flex-1"},Ae={class:"text-lg font-bold text-gray-900 mb-0"},He={class:"flex row items-end"},Ue={class:"flex-1 col-12 pl-4"},Ge={class:"flex items-center text-sm text-gray-700",style:{"margin-top":"3px"}},Pe={style:{transform:"translateX(-3px)"},width:"24px",height:"24px",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg","stroke-width":"2",stroke:"#374151",fill:"none"},Ne={class:"font-medium"},Ie={class:"flex items-center text-sm text-gray-700",style:{"margin-top":"3px"}},Ee={class:"font-medium"},qe={class:"flex items-center text-sm text-gray-700",style:{"margin-top":"3px"}},Ye={class:"font-medium"},Oe={class:"flex items-center text-sm text-gray-700",style:{"margin-top":"3px"}},Je=["innerHTML"],Ze={class:"font-medium"},We={class:"p-4 bg-gray-50"},Xe={class:"flex justify-between items-center"},Ke={class:"flex items-center"},et={class:"text-sm font-medium text-gray-700"},tt={class:"flex items-center"},ot=["innerHTML"],st={flat:"",rounded:"",color:"primary",size:"sm",class:"ml-3 cursor-pointer"},lt=["innerHTML"],at={key:1,class:"flex flex-col items-center justify-center py-20"},it={__name:"reservesPage",setup(z){H.locale("es",{monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_")});const y=p([]),f=p(!1),$=te(),M=G(),u=p(""),g=p({}),l=p({status:4,area_id:"",date_from:"",date_to:"",amount_type:"",sort_by:"created_at",sort_dir:"desc"}),x=()=>{f.value=!0,$.getReservesByUser(l.value).then(i=>{if(i.code!==200)throw i;y.value=i.data}).catch(i=>{console.log(i)}).finally(()=>{f.value=!1})},Q=i=>{l.value={...l.value,...i},x()},k=i=>{M.push(i)},B=i=>{const o=t(i);b(o.reserve),setTimeout(()=>{u.value=o.dialog},500)},b=i=>{g.value=y.value.find(o=>o.id==i)},t=i=>i.target.closest(".q-item").dataset,a=i=>i.amount>0?`S/. ${i.amount}`:"Gratis";return P(()=>{x()}),(i,o)=>(d(),c("div",Be,[e("div",Re,[f.value?(d(),c("div",Se,[s(N,{color:"primary",size:"7rem"})])):(d(),c("div",je,[e("div",ze,[s(V,{outline:"",color:"primary",icon:"eva-funnel-outline",onClick:o[0]||(o[0]=n=>u.value="filter")})]),y.value.length>0?(d(),c("div",De,[(d(!0),c(O,null,J(y.value,n=>(d(),c("div",{key:n.id,class:"bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden md:mb-5",style:{position:"relative"}},[e("div",Le,[e("div",Fe,[e("div",Te,[e("h3",Ae," #"+v(n.booking_number),1)]),e("span",{class:Z(["bg-"+n.status_color,"inline-block px-3 py-2 text-xs font-bold text-white badgeReserve"])},v(n.status_label),3)]),e("div",He,[e("div",Ue,[e("div",Ge,[(d(),c("svg",Pe,[...o[5]||(o[5]=[D('<g id="SVGRepo_bgCarrier" stroke-width="0" data-v-e43e55b4></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-e43e55b4></g><g id="SVGRepo_iconCarrier" data-v-e43e55b4><path d="M34.82,52.73H14.69V22.18a1,1,0,0,1,.52-.87L33.34,11.4a1,1,0,0,1,1.48.88Z" stroke-linecap="round" data-v-e43e55b4></path><path d="M48.87,52.73H34.92V21.59L48.4,29.3a1,1,0,0,1,.47.85Z" stroke-linecap="round" data-v-e43e55b4></path><line x1="28.1" y1="24.86" x2="21.06" y2="24.86" stroke-linecap="round" data-v-e43e55b4></line><line x1="43.66" y1="32.41" x2="40.14" y2="32.41" stroke-linecap="round" data-v-e43e55b4></line><line x1="43.66" y1="36.9" x2="40.14" y2="36.9" stroke-linecap="round" data-v-e43e55b4></line><line x1="43.66" y1="41.71" x2="40.14" y2="41.71" stroke-linecap="round" data-v-e43e55b4></line><line x1="43.66" y1="46.19" x2="40.14" y2="46.19" stroke-linecap="round" data-v-e43e55b4></line><line x1="28.1" y1="30.44" x2="21.06" y2="30.44" stroke-linecap="round" data-v-e43e55b4></line><line x1="28.1" y1="35.94" x2="21.06" y2="35.94" stroke-linecap="round" data-v-e43e55b4></line><line x1="28.1" y1="41.44" x2="21.06" y2="41.44" stroke-linecap="round" data-v-e43e55b4></line><line x1="28.1" y1="46.94" x2="21.06" y2="46.94" stroke-linecap="round" data-v-e43e55b4></line><line x1="9.46" y1="52.73" x2="54.54" y2="52.73" stroke-linecap="round" data-v-e43e55b4></line></g>',3)])])),e("span",Ne,v(n.comun_area.name),1)]),e("div",Ie,[o[6]||(o[6]=e("svg",{class:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",Ee,v(m(H)(n.date).format("DD MMM YYYY")),1)]),e("div",qe,[o[7]||(o[7]=e("svg",{class:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",Ye,v(n.time_from)+" - "+v(n.time_to),1)]),e("div",Oe,[e("div",{innerHTML:m(j).moneyIcon},null,8,Je),e("span",Ze,v(a(n)),1)])])])]),e("div",We,[e("div",Xe,[e("div",Ke,[e("span",et,v(n.user.name),1)]),e("div",tt,[n.status==2?(d(),w(V,{key:0,unelevated:"",rounded:"",color:"warning",size:"sm",class:"ml-3",onClick:R=>k("/admin/pay/validate/"+n.pay.id)},{default:r(()=>[s(W,{class:"bg-primary text-white text-body2",offset:[10,10]},{default:r(()=>[...o[8]||(o[8]=[_(" Validar pago ",-1)])]),_:1}),e("div",{innerHTML:m(j).processPay},null,8,ot)]),_:1},8,["onClick"])):S("",!0),e("div",st,[e("div",{innerHTML:m(j).optionsBook},null,8,lt),s(ee,null,{default:r(()=>[s(K,{style:{"min-width":"150px"}},{default:r(()=>[L((d(),w(F,{clickable:"",onClick:R=>k("/client/reserves/view/"+n.id)},{default:r(()=>[s(T,null,{default:r(()=>[...o[9]||(o[9]=[_("Ver detalles",-1)])]),_:1})]),_:1},8,["onClick"])),[[A]]),n.status!=0?L((d(),w(F,{key:0,clickable:"",onClick:o[1]||(o[1]=R=>B(R)),"data-dialog":"cancel","data-reserve":n.id},{default:r(()=>[s(T,null,{default:r(()=>[...o[10]||(o[10]=[_("Cancelar reserva",-1)])]),_:1})]),_:1},8,["data-reserve"])),[[A]]):S("",!0),s(X)]),_:2},1024)]),_:2},1024)])])])])]))),128))])):(d(),c("div",at,[...o[11]||(o[11]=[D('<div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mb-6" data-v-e43e55b4><svg class="w-10 h-10 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e43e55b4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-e43e55b4></path></svg></div><h3 class="text-lg font-semibold text-gray-900 mb-2" data-v-e43e55b4>No hay reservas游봌</h3><p class="text-gray-600 text-center mb-6" data-v-e43e55b4>A칰n han realizado ninguna reserva de 치reas comunes.</p>',3)])]))]))]),s(Qe,{dialog:u.value=="filter",onCloseModal:o[2]||(o[2]=n=>u.value=""),onUpdateList:Q},null,8,["dialog"]),Object.values(g.value).length>0?(d(),w(oe,{key:0,dialog:u.value=="cancel",reserve:g.value,onCloseModal:o[3]||(o[3]=n=>u.value=""),onUpdateList:o[4]||(o[4]=n=>x())},null,8,["dialog","reserve"])):S("",!0)]))}},Qt=Y(it,[["__scopeId","data-v-e43e55b4"]]);export{Qt as default};
