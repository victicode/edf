import{a2 as c,a3 as o}from"./index-BSBF4jGH.js";const u=c("Quota",{actions:{async getQuotasByUser(e){return await new Promise((a,r)=>{if(!o.getToken())throw"";o.setHeader();const t=this.filterQuery(e),i="/api/quotas"+(t?`?${t}`:"");o.get(i).then(({data:n})=>{if(n.code!=200)throw n;a(n)}).catch(({response:n})=>{console.log(n),r(n.data.error)})})},async createQuota(e){return await new Promise((a,r)=>{if(!o.getToken())throw"";o.setHeader(),o.post("/api/quotas",e).then(({data:t})=>{if(t.code!=200)throw t;a(t)}).catch(({response:t})=>{console.log(t),t.data.code==403&&r(t.data),r(t.data.error)})})},async createQuotaPay(e){return await new Promise((a,r)=>{if(!o.getToken())throw"";o.setHeader(),o.post("/api/pays/quotas",e.data).then(({data:t})=>{if(t.code!=200)throw t;a(t)}).catch(({response:t})=>{console.log(t),r(t.data.error)})})},async getQuotaById(e){return await new Promise((a,r)=>{if(!o.getToken())throw"";o.setHeader(),o.get("/api/quotas/byId/"+e).then(({data:t})=>{if(t.code!=200)throw t;a(t)}).catch(({response:t})=>{console.log(t),r(t.data.error)})})},async getQuotaByArea(e){return await new Promise((a,r)=>{if(!o.getToken())throw"";o.setHeader(),o.get("/api/quotas/byArea/"+e).then(({data:t})=>{if(t.code!=200)throw t;a(t)}).catch(({response:t})=>{console.log(t),r(t.data.error)})})},async updateQuota(e){return await new Promise((a,r)=>{if(!o.getToken())throw"";o.setHeader(),o.put("/api/quotas/"+e.id,e).then(({data:t})=>{if(t.code!=200)throw t;a(t)}).catch(({response:t})=>{console.log(t),t.data.code==403&&r(t.data),r(t.data.error)})})},async getAvailableQuotaInDayByArea(e){return await new Promise((a,r)=>{if(!o.getToken())throw"";o.setHeader(),o.get("/api/quotas/availableBooking/"+e.idArea+"?date="+e.date+"&").then(({data:t})=>{if(t.code!=200)throw t;a(t)}).catch(({response:t})=>{console.log(t),r(t.data.error)})})},async deleteQuota(e){return await new Promise((a,r)=>{if(!o.getToken())throw"";o.setHeader(),o.delete("/api/quotas/"+e).then(({data:t})=>{if(t.code!=200)throw t;a(t)}).catch(({response:t})=>{console.log(t),r(t.data.error)})})},async cancelQuota(e){return await new Promise((a,r)=>{if(!o.getToken())throw"";o.setHeader(),o.post("/api/quotas/cancel/"+e).then(({data:t})=>{if(t.code!=200)throw t;a(t)}).catch(({response:t})=>{console.log(t),r(t.data.error)})})},async getPendingQuota(){return await new Promise((e,a)=>{if(!o.getToken())throw"";o.setHeader(),o.get("/api/quotas/pendings").then(({data:r})=>{if(r.code!=200)throw r;e(r)}).catch(({response:r})=>{console.log(r),a(r.data.error)})})},filterQuery(e){try{const a=new URLSearchParams;return!e||typeof e!="object"?"":(e.status!==void 0&&Number(e.status)!==4&&a.set("status",String(e.status)),e.area_id&&a.set("area_id",String(e.area_id)),e.date_from&&a.set("date_from",String(e.date_from)),e.date_to&&a.set("date_to",String(e.date_to)),e.amount_type&&a.set("amount_type",String(e.amount_type)),e.sort_by&&a.set("sort_by",String(e.sort_by)),e.sort_dir&&a.set("sort_dir",String(e.sort_dir)),a.toString())}catch{return""}}}});export{u};
